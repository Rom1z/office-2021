"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[3206],{64743:function(n,e,t){t.r(e),t.d(e,{MSATenantId:function(){return Hu},OfficeFluidOneDsSink:function(){return qu}});var r=t(15671),i=t(43144),o=t(75971),a=t(82732),u="function",c="object",s="undefined",f="prototype",l="hasOwnProperty",d=Object,v=d[f],h=d.assign,p=d.create,g=d.defineProperty,y=v[l],m=null;function b(n){void 0===n&&(n=!0);var e=!1===n?null:m;return e||(typeof globalThis!==s&&(e=globalThis),e||typeof self===s||(e=self),e||typeof window===s||(e=window),e||typeof t.g===s||(e=t.g),m=e),e}function S(n){throw new TypeError(n)}function _(n){if(p)return p(n);if(null==n)return{};var e=typeof n;function t(){}return e!==c&&e!==u&&S("Object prototype may only be an Object:"+n),t[f]=n,new t}var T="initialize",C="name",w="getNotifyMgr",E="identifier",P="push",I="isInitialized",x="config",k="instrumentationKey",D="logger",O="length",M="time",N="processNext",U="getProcessTelContext",A="addNotificationListener",L="removeNotificationListener",R="stopPollingInternalLogs",F="onComplete",K="getPlugin",B="flush",H="_extensions",q="splice",z="teardown",j="messageId",G="message",V="isAsync",X="_doTeardown",J="update",Q="getNext",W="diagLog",$="setNextPlugin",Z="createNew",Y="cookieCfg",nn="indexOf",en="substring",tn="userAgent",rn="split",on="setEnabled",an="substr",un="nodeType",cn="apply",sn="replace",fn="enableDebugExceptions",ln="toLowerCase",dn="call",vn="type",hn="handler",pn="listeners",gn="isChildEvt",yn="getCtx",mn="setCtx",bn="complete",Sn="traceId",_n="spanId",Tn="traceFlags",Cn="",wn="channels",En="core",Pn="createPerfMgr",In="disabled",xn="extensionConfig",kn="processTelemetry",Dn="priority",On="eventsSent",Mn="eventsDiscarded",Nn="eventsSendRequest",Un="perfEvent",An="errorToConsole",Ln="warnToConsole",Rn="getPerfMgr",Fn="toISOString",Kn="endsWith",Bn="startsWith",Hn="indexOf",qn="trim",zn="toString",jn="__proto__",Gn="constructor",Vn=g,Xn=d.freeze,Jn=(d.seal,d.keys),Qn=String[f],Wn=Qn[qn],$n=Qn[Kn],Zn=Qn[Bn],Yn=Date[f][Fn],ne=Array.isArray,ee=v[zn],te=y[zn],re=te[dn](d),ie=/-([a-z])/g,oe=/([^\w\d_$])/g,ae=/^(\d+[\w\d_$])/,ue=Object.getPrototypeOf;function ce(n){return void 0===n||typeof n===s}function se(n){return null===n||ce(n)}function fe(n){return!se(n)}function le(n,e){return!(!n||!y[dn](n,e))}function de(n){return!(!n||typeof n!==c)}function ve(n){return!(!n||typeof n!==u)}function he(n){var e=n;return e&&_e(e)&&(e=(e=(e=e[sn](ie,(function(n,e){return e.toUpperCase()})))[sn](oe,"_"))[sn](ae,(function(n,e){return"_"+e}))),e}function pe(n,e){if(n)for(var t in n)y[dn](n,t)&&e[dn](n,t,n[t])}function ge(n,e){var t=!1;return n&&e&&!(t=n===e)&&(t=$n?n[Kn](e):function(n,e){var t=!1,r=e?e[O]:0,i=n?n[O]:0;if(r&&i&&i>=r&&!(t=n===e)){for(var o=i-1,a=r-1;a>=0;a--){if(n[o]!=e[a])return!1;o--}t=!0}return t}(n,e)),t}function ye(n,e){var t=!1;return n&&e&&!(t=n===e)&&(t=Zn?n[Bn](e):function(n,e){var t=!1,r=e?e[O]:0;if(n&&r&&n[O]>=r&&!(t=n===e)){for(var i=0;i<r;i++)if(n[i]!==e[i])return!1;t=!0}return t}(n,e)),t}function me(n,e){return!(!n||!e)&&-1!==n[nn](e)}var be=ne||function(n){return!(!n||"[object Array]"!==ee[dn](n))};function Se(n){return!(!n||"[object Error]"!==ee[dn](n))}function _e(n){return"string"===typeof n}function Te(n){return"number"===typeof n}function Ce(n){return"boolean"===typeof n}function we(n){var e=!1;if(n&&"object"===typeof n){var t=ue?ue(n):function(n){if(n){if(ue)return ue(n);var e=n[jn]||n[f]||n[Gn];if(e)return e}return null}(n);t?(t[Gn]&&y[dn](t,Gn)&&(t=t[Gn]),e=typeof t===u&&te[dn](t)===re):e=!0}return e}function Ee(n){if(n)return Yn?n[Fn]():function(n){if(n&&n.getUTCFullYear){var e=function(n){var e=String(n);return 1===e[O]&&(e="0"+e),e};return n.getUTCFullYear()+"-"+e(n.getUTCMonth()+1)+"-"+e(n.getUTCDate())+"T"+e(n.getUTCHours())+":"+e(n.getUTCMinutes())+":"+e(n.getUTCSeconds())+"."+String((n.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(n)}function Pe(n,e,t){var r=n[O];try{for(var i=0;i<r&&(!(i in n)||-1!==e[dn](t||n,n[i],i,n));i++);}catch(o){}}function Ie(n,e,t){if(n){if(n[Hn])return n[Hn](e,t);var r=n[O],i=t||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in n&&n[o]===e)return o}catch(a){}}return-1}function xe(n){return n&&(n=Wn&&n[qn]?n[qn]():n[sn]?n[sn](/^\s+|(?=\s)\s+$/g,Cn):n),n}var ke=!{toString:null}.propertyIsEnumerable("toString"),De=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Oe(n){var e=typeof n;if(e===u||e===c&&null!==n||S("objKeys called on non-object"),!ke&&Jn)return Jn(n);var t=[];for(var r in n)n&&y[dn](n,r)&&t[P](r);if(ke)for(var i=De[O],o=0;o<i;o++)n&&y[dn](n,De[o])&&t[P](De[o]);return t}function Me(n,e,t,r){if(Vn)try{var i={enumerable:!0,configurable:!0};return t&&(i.get=t),r&&(i.set=r),Vn(n,e,i),!0}catch(o){}return!1}function Ne(n){return n}var Ue=Xn||Ne;function Ae(){var n=Date;return n.now?n.now():(new n).getTime()}function Le(n){return Se(n)?n[C]:Cn}function Re(n,e,t,r,i){var o=t;return n&&((o=n[e])===t||i&&!i(o)||r&&!r(t)||(o=t,n[e]=o)),o}function Fe(n,e,t){var r;return n?!(r=n[e])&&se(r)&&(r=ce(t)?{}:t,n[e]=r):r=ce(t)?{}:t,r}function Ke(n,e){return se(n)?e:n}function Be(n){return!!n}function He(n){throw new Error(n)}function qe(n,e){var t=null,r=null;return ve(n)?t=n:r=n,function(){var n=arguments;if(t&&(r=t()),r)return r[e][cn](r,n)}}function ze(n,e,t,r,i){n&&e&&t&&(!1!==i||ce(n[e]))&&(n[e]=qe(t,r))}function je(n,e,t,r){return n&&e&&de(n)&&be(t)&&Pe(t,(function(t){_e(t)&&ze(n,t,e,t,r)})),n}function Ge(n){return n&&h&&(n=d(h({},n))),n}function Ve(n,e,t,r,i,o){var a=arguments,u=a[0]||{},c=a[O],s=!1,f=1;for(c>0&&Ce(u)&&(s=u,u=a[f]||{},f++),de(u)||(u={});f<c;f++){var l=a[f],d=be(l),v=de(l);for(var h in l){if(d&&h in l||v&&y[dn](l,h)){var p=l[h],g=void 0;if(s&&p&&((g=be(p))||we(p))){var m=u[h];g?be(m)||(m=[]):we(m)||(m={}),p=Ve(s,m,p)}void 0!==p&&(u[h]=p)}}}return u}var Xe=t(7429),Je="Data.",Qe="User.PrimaryIdentityHash",We="User.PrimaryIdentitySpace",$e="User.TenantId",Ze="User.IsAnonymous",Ye="User.IsSignedIn",nt="f998cc5ba4d448d6a1e8e913ff18be94-dd122e0a-fcf8-4dc5-9dbb-6afac5325183-7405";function et(n,e,t,r){var i=!0;if(e)for(var o=function(e){var o=e.classification,u=e.dataType,c=e.name;if(o&&!(4===o||1===o||2===r&&32===o||3===r&&2048===o))return i=!1,"break";if(3===r&&t&&3!==u&&1!==u&&2!==u&&"OTelJS.Version"!==c&&"OTelJS.Sink"!==c)return(0,a.uf)(0,1,(function(){return"DNM: Invalid field type "+c})),i=!1,"break";var s=void 0;s=t?"zC."===c.substr(0,3)?"zC."+Je+c.substr(3):Je+c:c;var f=void 0;switch(u){case 3:f=6;break;case 2:f=4;break;case 4:f=8;break;case 0:return n[s]="string"===typeof e.value?e.value.substr(0,25e3):e.value,"continue";default:return n[s]=e.value,"continue"}var l={value:e.value,propertyType:f};n[s]=l},u=0,c=e;u<c.length;u++){if("break"===o(c[u]))break}return i}function tt(n){(0,a.uf)(0,1,(function(){return"Invalid "+n}))}function rt(n){return _e(n)&&""!=n}function it(n,e){return Object.values(e).includes(n)}function ot(n){return it(n,Xe.t4)}function at(n){return it(n,Xe.fU)}function ut(n){return["MSACID","MSAPUID","OrgIdCID","OrgIdPUID","UserObjectId","Other"].includes(n)}function ct(n){return!n||"Other"==n}function st(n,e){var t=!0;function r(e,r){r(n[e])||(tt(e),t=!1)}function i(n){return new RegExp("^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$",e?"":"i").test(n)}return r("App.Name",rt),r("App.Platform",e?ot:rt),r("App.Version",rt),r("Session.Id",i),e?(r("Release.AudienceGroup",at),r(Ye,Ce),n[Ye]?(r(Qe,rt),r(We,ut),["OrgIdCID","OrgIdPUID","UserObjectId"].includes(n[We])?r($e,i):r($e,se)):(r(We,ct),r($e,se))):n[Ze]||!1===n[Ye]||(r(Qe,rt),r(We,rt),n[$e]&&r($e,i)),se(n[Ze])||n[Ye]!==n[Ze]||(tt(Ze),t=!1),t}var ft,lt=t(27188),dt="undefined",vt="constructor",ht="prototype",pt="function",gt="_dynInstFuncs",yt="_isDynProxy",mt="_dynClass",bt="_dynInstChk",St=bt,_t="_dfOpts",Tt="_unknown_",Ct="__proto__",wt="_dyn"+Ct,Et="__dynProto$Gbl",Pt="_dynInstProto",It="useBaseInst",xt="setInstFuncs",kt=Object,Dt=kt.getPrototypeOf,Ot=kt.getOwnPropertyNames;var Mt=function(){var n;return typeof globalThis!==dt&&(n=globalThis),n||typeof self===dt||(n=self),n||typeof window===dt||(n=window),n||typeof t.g===dt||(n=t.g),n||{}}(),Nt=Mt[Et]||(Mt[Et]={o:(ft={},ft[xt]=!0,ft[It]=!0,ft),n:1e3});function Ut(n,e){return n&&kt[ht].hasOwnProperty.call(n,e)}function At(n){return n&&(n===kt[ht]||n===Array[ht])}function Lt(n){return At(n)||n===Function[ht]}function Rt(n){var e;if(n){if(Dt)return Dt(n);var t=n[Ct]||n[ht]||(n[vt]?n[vt][ht]:null);e=n[wt]||t,Ut(n,wt)||(delete n[Pt],e=n[wt]=n[Pt]||n[wt],n[Pt]=t)}return e}function Ft(n,e){var t=[];if(Ot)t=Ot(n);else for(var r in n)"string"===typeof r&&Ut(n,r)&&t.push(r);if(t&&t.length>0)for(var i=0;i<t.length;i++)e(t[i])}function Kt(n,e,t){return e!==vt&&typeof n[e]===pt&&(t||Ut(n,e))}function Bt(n){throw new TypeError("DynamicProto: "+n)}function Ht(n,e){for(var t=n.length-1;t>=0;t--)if(n[t]===e)return!0;return!1}function qt(n,e,t,r,i){function o(n,e){var t=function t(){var r=function(n,e,t,r){var i=null;if(n&&Ut(t,mt)){var o=n[gt]||{};if((i=(o[t[mt]]||{})[e])||Bt("Missing ["+e+"] "+pt),!i[bt]&&!1!==o[St]){for(var a=!Ut(n,e),u=Rt(n),c=[];a&&u&&!Lt(u)&&!Ht(c,u);){var s=u[e];if(s){a=s===r;break}c.push(u),u=Rt(u)}try{a&&(n[e]=i),i[bt]=1}catch(f){o[St]=!1}}}return i}(this,e,n,t)||function(n,e,t){var r=e[n];return r===t&&(r=Rt(e)[n]),typeof r!==pt&&Bt("["+n+"] is not a "+pt),r}(e,n,t);return r.apply(this,arguments)};return t[yt]=1,t}if(!At(n)){var a=t[gt]=t[gt]||{},u=a[e]=a[e]||{};!1!==a[St]&&(a[St]=!!i),Ft(t,(function(e){Kt(t,e,!1)&&t[e]!==r[e]&&(u[e]=t[e],delete t[e],(!Ut(n,e)||n[e]&&!n[e][yt])&&(n[e]=o(n,e)))}))}}function zt(n,e){return Ut(n,ht)?n.name||e||Tt:((n||{})[vt]||{}).name||e||Tt}function jt(n,e,t,r){Ut(n,ht)||Bt("theClass is an invalid class definition.");var i=n[ht];(function(n,e){if(Dt){for(var t=[],r=Rt(e);r&&!Lt(r)&&!Ht(t,r);){if(r===n)return!0;t.push(r),r=Rt(r)}return!1}return!0})(i,e)||Bt("["+zt(n)+"] not in hierarchy of ["+zt(e)+"]");var o=null;Ut(i,mt)?o=i[mt]:(o="_dynCls$"+zt(n,"_")+"$"+Nt.n,Nt.n++,i[mt]=o);var a=jt[_t],u=!!a[It];u&&r&&void 0!==r[It]&&(u=!!r[It]);var c=function(n){var e={};return Ft(n,(function(t){!e[t]&&Kt(n,t,!1)&&(e[t]=n[t])})),e}(e),s=function(n,e,t,r){function i(n,e,t){var i=e[t];if(i[yt]&&r){var o=n[gt]||{};!1!==o[St]&&(i=(o[e[mt]]||{})[t]||i)}return function(){return i.apply(n,arguments)}}var o={};Ft(t,(function(n){o[n]=i(e,t,n)}));for(var a=Rt(n),u=[];a&&!Lt(a)&&!Ht(u,a);)Ft(a,(function(n){!o[n]&&Kt(a,n,!Dt)&&(o[n]=i(e,a,n))})),u.push(a),a=Rt(a);return o}(i,e,c,u);t(e,s);var f=!!Dt&&!!a[xt];f&&r&&(f=!!r[xt]),qt(i,o,e,c,!1!==f)}jt[_t]=Nt.o;var Gt="window",Vt="document",Xt="navigator",Jt="location",Qt="console",Wt="performance",$t="JSON",Zt="crypto",Yt="msCrypto",nr="ReactNative",er="msie",tr="trident/",rr="XMLHttpRequest",ir=null,or=null,ar=!1,ur=null,cr=null;function sr(n,e){var t=!1;if(n){try{if(!(t=e in n)){var r=n[f];r&&(t=e in r)}}catch(i){}if(!t)try{t=!ce((new n)[e])}catch(i){}}return t}function fr(n){var e=b();return e&&e[n]?e[n]:n===Gt&&lr()?window:null}function lr(){return Boolean(typeof window===c&&window)}function dr(){return lr()?window:fr(Gt)}function vr(){return Boolean(typeof document===c&&document)?document:fr(Vt)}function hr(){return Boolean(typeof navigator===c&&navigator)}function pr(){return hr()?navigator:fr(Xt)}function gr(n){if(n&&ar){var e=fr("__mockLocation");if(e)return e}return typeof location===c&&location?location:fr(Jt)}function yr(){return fr(Wt)}function mr(){return Boolean(typeof JSON===c&&JSON||null!==fr($t))}function br(){return mr()?JSON||fr($t):null}function Sr(){var n=pr();return!(!n||!n.product)&&n.product===nr}function _r(){var n=pr();if(n&&(n[tn]!==or||null===ir)){var e=((or=n[tn])||Cn)[ln]();ir=me(e,er)||me(e,tr)}return ir}function Tr(n){var e=Object[f].toString[dn](n),t=Cn;return"[object Error]"===e?t="{ stack: '"+n.stack+"', message: '"+n.message+"', name: '"+n[C]+"'":mr()&&(t=br().stringify(n)),e+t}function Cr(){return null===cr&&(cr=hr()&&Boolean(pr().sendBeacon)),cr}function wr(n){var e=!1;try{e=!!fr("fetch");var t=fr("Request");e&&n&&t&&(e=sr(t,"keepalive"))}catch(r){}return e}function Er(){return null===ur&&(ur=typeof XDomainRequest!==s)&&Pr()&&(ur=ur&&!sr(fr(rr),"withCredentials")),ur}function Pr(){var n=!1;try{n=!!fr(rr)}catch(e){}return n}var Ir,xr=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],kr=null;function Dr(n,e){return function(){var t=arguments,r=Or(e);if(r){var i=r.listener;i&&i[n]&&i[n][cn](i,t)}}}function Or(n){var e=kr;return e||!0===n.disableDbgExt||(e=kr||function(){var n=fr("Microsoft");return n&&(kr=n.ApplicationInsights),kr}()),e?e.ChromeDbgExt:null}function Mr(n){if(!Ir){Ir={};for(var e=0;e<xr[O];e++)Ir[xr[e]]=Dr(xr[e],n)}return Ir}function Nr(n){return n?'"'+n[sn](/\"/g,Cn)+'"':Cn}function Ur(n,e){var t=typeof console!==s?console:fr(Qt);if(t){var r="log";t[n]&&(r=n),ve(t[r])&&t[r](e)}}var Ar=function(){function n(n,e,t,r){void 0===t&&(t=!1);var i=this;i[j]=n,i[G]=(t?"AI: ":"AI (Internal): ")+n;var o=Cn;mr()&&(o=br().stringify(r));var a=(e?" message:"+Nr(e):Cn)+(r?" props:"+Nr(o):Cn);i[G]+=a}return n.dataType="MessageData",n}();var Lr=function(){function n(e){this.identifier="DiagnosticLogger",this.queue=[];var t,r,i,o,a=0,u={};jt(n,this,(function(n){function c(e,t){if(!(a>=i)){var o=!0,c="AITR_"+t[j];if(u[c]?o=!1:u[c]=!0,o&&(e<=r&&(n.queue[P](t),a++,s(1===e?"error":"warn",t)),a===i)){var f="Internal events throttle limit per PageView reached for this app.",l=new Ar(23,f,!1);n.queue[P](l),1===e?n[An](f):n[Ln](f)}}}function s(n,t){var r=Or(e||{});r&&r[W]&&r[W](n,t)}!function(n){t=Ke(n.loggingLevelConsole,0),r=Ke(n.loggingLevelTelemetry,1),i=Ke(n.maxMessageLimit,25),o=Ke(n.enableDebug,Ke(n[fn],!1))}(e||{}),n.consoleLoggingLevel=function(){return t},n.telemetryLoggingLevel=function(){return r},n.maxInternalMessageLimit=function(){return i},n[fn]=function(){return o},n.throwInternal=function(e,r,i,a,f){void 0===f&&(f=!1);var l=new Ar(r,i,f,a);if(o)throw Tr(l);var d=1===e?An:Ln;if(ce(l[G]))s("throw"+(1===e?"Critical":"Warning"),l);else{if(f){var v=+l[j];!u[v]&&t>=e&&(n[d](l[G]),u[v]=!0)}else t>=e&&n[d](l[G]);c(e,l)}},n[Ln]=function(n){Ur("warn",n),s("warning",n)},n[An]=function(n){Ur("error",n),s("error",n)},n.resetInternalMessageCount=function(){a=0,u={}},n.logInternalMessage=c}))}return n.__ieDyn=1,n}();function Rr(n){return n||new Lr}function Fr(n,e,t,r,i,o){void 0===o&&(o=!1),Rr(n).throwInternal(e,t,r,i,o)}function Kr(n,e){Rr(n)[Ln](e)}var Br="toGMTString",Hr="toUTCString",qr="cookie",zr="expires",jr="enabled",Gr="isCookieUseDisabled",Vr="disableCookiesUsage",Xr="_ckMgr",Jr=null,Qr=null,Wr=null,$r=vr(),Zr={},Yr={};function ni(n){return!n||n.isEnabled()}function ei(n,e){return!!(e&&n&&be(n.ignoreCookies))&&-1!==n.ignoreCookies[nn](e)}function ti(n,e){var t,r=function(n){var e=n[Y]=n[Y]||{};if(Re(e,"domain",n.cookieDomain,fe,se),Re(e,"path",n.cookiePath||"/",null,se),se(e[jr])){var t=void 0;ce(n[Gr])||(t=!n[Gr]),ce(n[Vr])||(t=!n[Vr]),e[jr]=t}return e}(n||Yr),i=r.path||"/",o=r.domain,a=!1!==r[jr],u=((t={isEnabled:function(){var n=a&&ri(e),t=Yr[Xr];return n&&t&&u!==t&&(n=ni(t)),n}})[on]=function(n){a=!1!==n},t.set=function(n,e,t,a,c){var s=!1;if(ni(u)&&!function(n,e){return!!(e&&n&&be(n.blockedCookies)&&-1!==n.blockedCookies[nn](e))||ei(n,e)}(r,n)){var f={},l=xe(e||Cn),d=l[nn](";");if(-1!==d&&(l=xe(e[en](0,d)),f=ii(e[en](d+1))),Re(f,"domain",a||o,Be,ce),!se(t)){var v=_r();if(ce(f[zr])){var h=Ae()+1e3*t;if(h>0){var p=new Date;p.setTime(h),Re(f,zr,oi(p,v?Br:Hr)||oi(p,v?Br:Hr)||Cn,Be)}}v||Re(f,"max-age",Cn+t,null,ce)}var g=gr();g&&"https:"===g.protocol&&(Re(f,"secure",null,null,ce),null===Qr&&(Qr=!si((pr()||{})[tn])),Qr&&Re(f,"SameSite","None",null,ce)),Re(f,"path",c||i,null,ce),(r.setCookie||ci)(n,ai(l,f)),s=!0}return s},t.get=function(n){var e=Cn;return ni(u)&&!ei(r,n)&&(e=(r.getCookie||ui)(n)),e},t.del=function(n,e){var t=!1;return ni(u)&&(t=u.purge(n,e)),t},t.purge=function(n,t){var i,o=!1;if(ri(e)){var a=((i={}).path=t||"/",i[zr]="Thu, 01 Jan 1970 00:00:01 GMT",i);_r()||(a["max-age"]="0"),(r.delCookie||ci)(n,ai(Cn,a)),o=!0}return o},t);return u[Xr]=u,u}function ri(n){if(null===Jr){Jr=!1;try{Jr=void 0!==($r||{})[qr]}catch(e){Fr(n,2,68,"Cannot access document.cookie - "+Le(e),{exception:Tr(e)})}}return Jr}function ii(n){var e={};n&&n[O]&&Pe(xe(n)[rn](";"),(function(n){if(n=xe(n||Cn)){var t=n[nn]("=");-1===t?e[n]=null:e[xe(n[en](0,t))]=xe(n[en](t+1))}}));return e}function oi(n,e){return ve(n[e])?n[e]():null}function ai(n,e){var t=n||Cn;return pe(e,(function(n,e){t+="; "+n+(se(e)?Cn:"="+e)})),t}function ui(n){var e=Cn;if($r){var t=$r[qr]||Cn;Wr!==t&&(Zr=ii(t),Wr=t),e=xe(Zr[n]||Cn)}return e}function ci(n,e){$r&&($r[qr]=n+"="+e)}function si(n){return!!_e(n)&&(!(!me(n,"CPU iPhone OS 12")&&!me(n,"iPad; CPU OS 12"))||(!!(me(n,"Macintosh; Intel Mac OS X 10_14")&&me(n,"Version/")&&me(n,"Safari"))||(!(!me(n,"Macintosh; Intel Mac OS X 10_14")||!ge(n,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))||(!(!me(n,"Chrome/5")&&!me(n,"Chrome/6"))||(!(!me(n,"UnrealEngine")||me(n,"Chrome"))||!(!me(n,"UCBrowser/12")&&!me(n,"UCBrowser/11")))))))}var fi=4294967296,li=4294967295,di=!1,vi=123456789,hi=987654321;function pi(n){n<0&&(n>>>=0),vi=123456789+n&li,hi=987654321-n&li,di=!0}function gi(){try{var n=2147483647&Ae();pi((Math.random()*fi^n)+n)}catch(e){}}function yi(n){var e=0,t=fr(Zt)||fr(Yt);return t&&t.getRandomValues&&(e=t.getRandomValues(new Uint32Array(1))[0]&li),0===e&&_r()&&(di||gi(),e=mi()&li),0===e&&(e=Math.floor(fi*Math.random()|0)),n||(e>>>=0),e}function mi(n){var e=((hi=36969*(65535&hi)+(hi>>16)&li)<<16)+(65535&(vi=18e3*(65535&vi)+(vi>>16)&li))>>>0&li|0;return n||(e>>>=0),e}function bi(n){void 0===n&&(n=22);for(var e=yi()>>>0,t=0,r=Cn;r[O]<n;)t++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&e),e>>>=6,5===t&&(e=(yi()<<2&4294967295|3&e)>>>0,t=0);return r}var Si=g,_i="2.8.14",Ti="."+bi(6),Ci=0;function wi(n){return 1===n[un]||9===n[un]||!+n[un]}function Ei(n,e){var t=e[n.id];if(!t){t={};try{wi(e)&&(function(n,e,t){if(Si)try{return Si(n,e,{value:t,enumerable:!1,configurable:!0}),!0}catch(r){}return!1}(e,n.id,t)||(e[n.id]=t))}catch(r){}}return t}function Pi(n,e){return void 0===e&&(e=!1),he(n+Ci+++(e?"."+_i:Cn)+Ti)}function Ii(n){var e={id:Pi("_aiData-"+(n||Cn)+"."+_i),accept:function(n){return wi(n)},get:function(n,t,r,i){var o=n[e.id];return o?o[he(t)]:(i&&((o=Ei(e,n))[he(t)]=r),r)},kill:function(n,e){if(n&&n[e])try{delete n[e]}catch(t){}}};return e}var xi="on",ki="attachEvent",Di="addEventListener",Oi="detachEvent",Mi="removeEventListener",Ni="events",Ui="visibilitychange",Ai="pagehide",Li="pageshow",Ri="unload",Fi="beforeunload",Ki=Pi("aiEvtPageHide"),Bi=Pi("aiEvtPageShow"),Hi=/\.[\.]+/g,qi=/[\.]+$/,zi=1,ji=Ii("events"),Gi=/^([^.]*)(?:\.(.+)|)/;function Vi(n){return n&&n[sn]?n[sn](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Cn):n}function Xi(n,e){var t;if(e){var r=Cn;be(e)?(r=Cn,Pe(e,(function(n){(n=Vi(n))&&("."!==n[0]&&(n="."+n),r+=n)}))):r=Vi(e),r&&("."!==r[0]&&(r="."+r),n=(n||Cn)+r)}var i=Gi.exec(n||Cn)||[];return(t={})[vn]=i[1],t.ns=(i[2]||Cn).replace(Hi,".").replace(qi,Cn)[rn](".").sort().join("."),t}function Ji(n,e,t){void 0===t&&(t=!0);var r=ji.get(n,Ni,{},t),i=r[e];return i||(i=r[e]=[]),i}function Qi(n,e,t,r){n&&e&&e[vn]&&(n[Mi]?n[Mi](e[vn],t,r):n[Oi]&&n[Oi](xi+e[vn],t))}function Wi(n,e,t,r){for(var i=e[O];i--;){var o=e[i];o&&(t.ns&&t.ns!==o.evtName.ns||r&&!r(o)||(Qi(n,o.evtName,o[hn],o.capture),e[q](i,1)))}}function $i(n,e){return e?Xi("xx",be(e)?[n].concat(e):[n,e]).ns[rn]("."):n}function Zi(n,e,t,r,i){var o;void 0===i&&(i=!1);var a=!1;if(n)try{var u=Xi(e,r);if(a=function(n,e,t,r){var i=!1;return n&&e&&e[vn]&&t&&(n[Di]?(n[Di](e[vn],t,r),i=!0):n[ki]&&(n[ki](xi+e[vn],t),i=!0)),i}(n,u,t,i),a&&ji.accept(n)){var c=((o={guid:zi++,evtName:u})[hn]=t,o.capture=i,o);Ji(n,u.type)[P](c)}}catch(s){}return a}function Yi(n,e,t,r,i){if(void 0===i&&(i=!1),n)try{var o=Xi(e,r),a=!1;!function(n,e,t){if(e[vn])Wi(n,Ji(n,e[vn]),e,t);else{var r=ji.get(n,Ni,{});pe(r,(function(r,i){Wi(n,i,e,t)})),0===Oe(r)[O]&&ji.kill(n,Ni)}}(n,o,(function(n){return!((!o.ns||t)&&n[hn]!==t)&&(a=!0,!0)})),a||Qi(n,o,t,i)}catch(u){}}function no(n,e,t){var r=!1,i=dr();i&&(r=Zi(i,n,e,t),r=Zi(i.body,n,e,t)||r);var o=vr();return o&&(r=Zi(o,n,e,t)||r),r}function eo(n,e,t,r){var i=!1;return e&&n&&n[O]>0&&Pe(n,(function(n){n&&(t&&-1!==Ie(t,n)||(i=no(n,e,r)||i))})),i}function to(n,e,t){n&&be(n)&&Pe(n,(function(n){n&&function(n,e,t){var r=dr();r&&(Yi(r,n,e,t),Yi(r.body,n,e,t));var i=vr();i&&Yi(i,n,e,t)}(n,e,t)}))}function ro(n,e,t){return function(n,e,t,r){var i=!1;return e&&n&&be(n)&&!(i=eo(n,e,t,r))&&t&&t[O]>0&&(i=eo(n,e,null,r)),i}([Fi,Ri,Ai],n,e,t)}function io(n,e,t){var r=$i(Ki,t),i=eo([Ai],n,e,r);return e&&-1!==Ie(e,Ui)||(i=eo([Ui],(function(e){var t=vr();n&&t&&"hidden"===t.visibilityState&&n(e)}),e,r)||i),!i&&e&&(i=io(n,null,t)),i}function oo(n,e,t){var r=$i(Bi,t),i=eo([Li],n,e,r);return!(i=eo([Ui],(function(e){var t=vr();n&&t&&"visible"===t.visibilityState&&n(e)}),e,r)||i)&&e&&(i=oo(n,null,t)),i}function ao(){var n=co();return n[en](0,8)+"-"+n[en](8,12)+"-"+n[en](12,16)+"-"+n[en](16,20)+"-"+n[en](20)}function uo(){var n=yr();return n&&n.now?n.now():Ae()}function co(){for(var n,e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=Cn,r=0;r<4;r++)t+=e[15&(n=yi())]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var i=e[8+(3&yi())|0];return t[an](0,8)+t[an](9,4)+"4"+t[an](13,3)+i+t[an](16,3)+t[an](19,12)}var so=function(n,e){var t=this;this.eventsProcessed=0,this.eventsSent=0,this.eventsDiscarded=0;var r=[],i=!1,o=!0,u={name:"DiagnosticLevel",processEvent:function(n){var e=n.eventFlags.diagnosticLevel;return i||10===e||110===e||120===e}},c={},s=ao();this.init=function(n){return st(c,!1)},this.begin=function(){return o=o&&st(c,!0)},this.getOneDSTelemetryEvent=function(n){return f(n,{eventType:1})},this.getOneDSCustomerContent=function(n){var e=n.telemetryProperties.customerContentVersion;if(e&&Math.floor(e)<=2&&1===n.telemetryProperties.customerContentType)return f(n,{eventType:2})};var f=function(n,e){if(o){var i,u=(0,lt.vE)(n);if(function(n,e){for(var t=function(t){var r=e[t];if(!r.processEvent(n))return(0,a.uf)(2,1,(function(){return"".concat(n.eventName," suppressed by ").concat(r.name)})),{value:!1}},r=0;r<e.length;r++){var i=t(r);if("object"===typeof i)return i.value}return!0}(u,r)){var f=(i=u,i.timestamp?new Date(i.timestamp):new Date).toISOString(),l={"Event.Name":u.eventName,"Event.Source":"OTelJS","Event.Time":{value:f,propertyType:9}};for(var d in t.eventsProcessed++,l["Event.Sequence"]={value:t.eventsProcessed,propertyType:4},l["Event.Id"]=s+"."+t.eventsProcessed,c)l[d]=c[d];if(!et(l,u.dataFields,!0,e.eventType))return void(0,a.uf)(0,1,(function(){return"Dropping Event: "+u.eventName}));var v="custom";u.eventContract&&(u.eventContract.name&&(l["Event.Contract"]=u.eventContract.name,v+="."+u.eventContract.name.toLowerCase().replace(/\./g,"_")),et(l,u.eventContract.dataFields,!1,e.eventType));var h=function(n,e){return 2===e?"b22a201c3f1d41d28ccc399ba6cc9ca2-1972c77f-1f79-4283-a0f9-b4ddc4646f55-7121":n.telemetryProperties&&(1!==e||n.telemetryProperties.ariaTenantToken)?1===e?n.telemetryProperties.ariaTenantToken:void 0:void(0,a.uf)(0,1,(function(){return"Missing Aria Token"}))}(u,e.eventType);if(!h)return;return{iKey:h,name:u.eventName,data:l,time:f,baseType:v,ext:{sdk:{seq:t.eventsProcessed}}}}}};this.addPreprocessor=function(n){r.push(n)},this.getOneDSPersistentDataFields=function(){return c},this.getPreprocessors=function(){return r};var l=function(n){et(c,n,!1,1)};this.addPersistentDataFields=l,this.setOptionalEventsEnabled=function(n){i=n},this.setFullEventsEnabled=this.setOptionalEventsEnabled,e.enableOptionalEvents&&(i=!0),l(n);var d=e.coreFields;if(d){l(Xe.gV.getFields(d.app)),l(Xe.n5.getFields(d.user)),l(Xe.z_.getFields(d.session));var v=d.release;v&&l(Xe.cl.getFields(v))}this.addPreprocessor(u)},fo=((b()||{}).Symbol,(b()||{}).Reflect,function(n,e){return fo=d.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e[l](t)&&(n[t]=e[t])},fo(n,e)});function lo(n,e){function t(){this.constructor=n}typeof e!==u&&null!==e&&S("Class extends value "+String(e)+" is not a constructor or null"),fo(n,e),n[f]=null===e?_(e):(t[f]=e[f],new t)}function vo(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n}var ho="ctx",po="ParentContextKey",go="ChildrenContextKey",yo=null,mo=function(){function n(e,t,r){var i,o=this,a=!1;(o.start=Ae(),o[C]=e,o[V]=r,o[gn]=function(){return!1},ve(t))&&(a=Me(o,"payload",(function(){return!i&&ve(t)&&(i=t(),t=null),i})));o[yn]=function(e){return e?e===n[po]||e===n[go]?o[e]:(o[ho]||{})[e]:null},o[mn]=function(e,t){if(e)if(e===n[po])o[e]||(o[gn]=function(){return!0}),o[e]=t;else if(e===n[go])o[e]=t;else{(o[ho]=o[ho]||{})[e]=t}},o[bn]=function(){var e=0,r=o[yn](n[go]);if(be(r))for(var i=0;i<r[O];i++){var u=r[i];u&&(e+=u[M])}o[M]=Ae()-o.start,o.exTime=o[M]-e,o[bn]=function(){},!a&&ve(t)&&(o.payload=t())}}return n.ParentContextKey="parent",n.ChildrenContextKey="childEvts",n}(),bo=function(){function n(e){this.ctx={},jt(n,this,(function(n){n.create=function(n,e,t){return new mo(n,e,t)},n.fire=function(n){n&&(n[bn](),e&&ve(e[Un])&&e[Un](n))},n[mn]=function(e,t){e&&((n[ho]=n[ho]||{})[e]=t)},n[yn]=function(e){return(n[ho]||{})[e]}}))}return n.__ieDyn=1,n}(),So="CoreUtils.doPerf";function _o(n,e,t,r,i){if(n){var o=n;if(o[Rn]&&(o=o[Rn]()),o){var a=void 0,u=o[yn](So);try{if(a=o.create(e(),r,i)){if(u&&a[mn]&&(a[mn](mo[po],u),u[yn]&&u[mn])){var c=u[yn](mo[go]);c||(c=[],u[mn](mo[go],c)),c[P](a)}return o[mn](So,a),t(a)}}catch(s){a&&a[mn]&&a[mn]("exception",s)}finally{a&&o.fire(a),o[mn](So,u)}}}return t()}var To="00000000000000000000000000000000",Co="0000000000000000";function wo(n,e,t){return!(!n||n[O]!==e||n===t)&&!!n.match(/^[\da-f]*$/)}function Eo(n){return wo(n,32,To)}function Po(n){return wo(n,16,Co)}var Io=Ii("plugin");function xo(n){return Io.get(n,"state",{},!0)}function ko(n,e){for(var t,r=[],i=null,o=n[Q]();o;){var a=o[K]();if(a){i&&ve(i[$])&&ve(a[kn])&&i[$](a);(ve(a[I])?a[I]():(t=xo(a))[I])||r[P](a),i=a,o=o[Q]()}}Pe(r,(function(r){var i=n[En]();r[T](n.getCfg(),i,e,n[Q]()),t=xo(r),r[En]||t[En]||(t[En]=i),t[I]=!0,delete t[z]}))}function Do(n){return n.sort((function(n,e){var t=0;if(e){var r=ve(e[kn]);ve(n[kn])?t=r?n[Dn]-e[Dn]:1:r&&(t=-1)}else t=n?1:-1;return t}))}var Oo="TelemetryPluginChain",Mo="_hasRun",No="_getTelCtx",Uo=0;function Ao(n,e,t,r){var i=null,o=[];null!==r&&(i=r?function(n,e,t){for(;n;){if(n[K]()===t)return n;n=n[Q]()}return Ko([t],e[x]||{},e)}(n,t,r):n);var a={_next:function(){var n=i;if(i=n?n[Q]():null,!n){var e=o;e&&e[O]>0&&(Pe(e,(function(n){try{n.func[dn](n.self,n.args)}catch(e){Fr(t[D],2,73,"Unexpected Exception during onComplete - "+Tr(e))}})),o=[])}return n},ctx:{core:function(){return t},diagLog:function(){return function(n,e){return(n||{})[D]||new Lr(e)}(t,e)},getCfg:function(){return e},getExtCfg:u,getConfig:function(n,t,r){void 0===r&&(r=!1);var i,o=u(n,null);o&&!se(o[t])?i=o[t]:e&&!se(e[t])&&(i=e[t]);return se(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(n){i=n},iterate:function(n){var e;for(;e=a._next();){var t=e[K]();t&&n(t)}},onComplete:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&o[P]({func:n,self:ce(e)?a.ctx:e,args:t})}}};function u(n,t,r){var i;if(void 0===t&&(t={}),void 0===r&&(r=0),e){var o=e[xn];o&&n&&(i=o[n])}if(i){if(de(t)&&0!==r){var a=Ve(!0,t,i);e&&2===r&&pe(t,(function(n){if(se(a[n])){var t=e[n];se(t)||(a[n]=t)}})),i=a}}else i=t;return i}return a}function Lo(n,e,t,r){var i=Ao(n,e,t,r),o=i.ctx;return o[N]=function(n){var e=i._next();return e&&e[kn](n,o),!e},o[Z]=function(n,r){return void 0===n&&(n=null),be(n)&&(n=Ko(n,e,t,r)),Lo(n||o[Q](),e,t,r)},o}function Ro(n,e,t){var r=e[x]||{},i=Ao(n,r,e,t),o=i.ctx;return o[N]=function(n){var e=i._next();return e&&e.unload(o,n),!e},o[Z]=function(n,t){return void 0===n&&(n=null),be(n)&&(n=Ko(n,r,e,t)),Ro(n||o[Q](),e,t)},o}function Fo(n,e,t){var r=e[x]||{},i=Ao(n,r,e,t).ctx;return i[N]=function(n){return i.iterate((function(e){ve(e[J])&&e[J](i,n)}))},i[Z]=function(n,t){return void 0===n&&(n=null),be(n)&&(n=Ko(n,r,e,t)),Fo(n||i[Q](),e,t)},i}function Ko(n,e,t,r){var i=null,o=!r;if(be(n)&&n[O]>0){var a=null;Pe(n,(function(n){if(o||r!==n||(o=!0),o&&n&&ve(n[kn])){var u=function(n,e,t){var r,i=null,o=ve(n[kn]),a=ve(n[$]);r=n?n[E]+"-"+n[Dn]+"-"+Uo++:"Unknown-0-"+Uo++;var u={getPlugin:function(){return n},getNext:function(){return i},processTelemetry:f,unload:l,update:d,_id:r,_setNext:function(n){i=n}};function c(){var r;return n&&ve(n[No])&&(r=n[No]()),r||(r=Lo(u,e,t)),r}function s(e,t,o,a,u){var c=!1,s=n?n[E]:Oo,f=e[Mo];return f||(f=e[Mo]={}),e.setNext(i),n&&_o(e[En](),(function(){return s+":"+o}),(function(){f[r]=!0;try{var n=i?i._id:Cn;n&&(f[n]=!1),c=t(e)}catch(u){var a=!i||f[i._id];a&&(c=!0),i&&a||Fr(e[W](),1,73,"Plugin ["+s+"] failed during "+o+" - "+Tr(u)+", run flags: "+Tr(f))}}),a,u),c}function f(e,t){function r(t){if(!n||!o)return!1;var r=xo(n);return!r[z]&&!r[In]&&(a&&n[$](i),n[kn](e,t),!0)}s(t=t||c(),r,"processTelemetry",(function(){return{item:e}}),!e.sync)||t[N](e)}function l(e,t){function r(){var r=!1;if(n){var i=xo(n),o=n[En]||i[En];!n||o&&o!==e.core()||i[z]||(i[En]=null,i[z]=!0,i[I]=!1,n[z]&&!0===n[z](e,t)&&(r=!0))}return r}s(e,r,"unload",(function(){}),t[V])||e[N](t)}function d(e,t){function r(){var r=!1;if(n){var i=xo(n),o=n[En]||i[En];!n||o&&o!==e.core()||i[z]||n[J]&&!0===n[J](e,t)&&(r=!0)}return r}s(e,r,"update",(function(){}),!1)||e[N](t)}return Ue(u)}(n,e,t);i||(i=u),a&&a._setNext(u),a=u}}))}return r&&!i?Ko([r],e,t):i}var Bo=500,Ho="Channel has invalid priority - ";function qo(n,e,t){e&&be(e)&&e[O]>0&&(Pe(e=e.sort((function(n,e){return n[Dn]-e[Dn]})),(function(n){n[Dn]<Bo&&He(Ho+n[E])})),n[P]({queue:Ue(e),chain:Ko(e,t[x],t)}))}function zo(){var n=[];return{add:function(e){e&&n[P](e)},run:function(e,t){Pe(n,(function(n){try{n(e,t)}catch(r){Fr(e[W](),2,73,"Unexpected error calling unload handler - "+Tr(r))}})),n=[]}}}var jo="getPlugin",Go=function(){function n(){var e,t,r,i,o,a=this;function u(n){void 0===n&&(n=null);var e=n;if(!e){var i=t||Lo(null,{},a[En]);e=r&&r[jo]?i[Z](null,r[jo]):i[Z](null,r)}return e}function c(n,e,i){n&&Re(n,xn,[],null,se),!i&&e&&(i=e[U]()[Q]());var o=r;r&&r[jo]&&(o=r[jo]()),a[En]=e,t=Lo(i,n,e,o)}function s(){e=!1,a[En]=null,t=null,r=null,o=[],i=zo()}s(),jt(n,a,(function(n){n[T]=function(n,t,r,i){c(n,t,i),e=!0},n[z]=function(e,t){var a,u=n[En];if(u&&(!e||u===e[En]())){var c,f=!1,l=e||Ro(null,u,r&&r[jo]?r[jo]():r),d=t||((a={reason:0})[V]=!1,a);return n[X]&&!0===n[X](l,d,v)?c=!0:v(),c}function v(){if(!f){f=!0,i.run(l,t);var n=o;o=[],Pe(n,(function(n){n.rm()})),!0===c&&l[N](d),s()}}},n[J]=function(e,t){var i=n[En];if(i&&(!e||i===e[En]())){var o,a=!1,u=e||Fo(null,i,r&&r[jo]?r[jo]():r),s=t||{reason:0};return n._doUpdate&&!0===n._doUpdate(u,s,f)?o=!0:f(),o}function f(){a||(a=!0,c(u.getCfg(),u.core(),u[Q]()))}},n._addHook=function(n){n&&(be(n)?o=o.concat(n):o[P](n))},ze(n,"_addUnloadCb",(function(){return i}),"add")})),a[W]=function(n){return u(n)[W]()},a[I]=function(){return e},a.setInitialized=function(n){e=n},a[$]=function(n){r=n},a[N]=function(n,e){e?e[N](n):r&&ve(r[kn])&&r[kn](n,null)},a._getTelCtx=u}return n.__ieDyn=1,n}(),Vo=function(n){function e(){var t,r,i=n.call(this)||this;function o(){t=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,o(),jt(e,i,(function(n,e){n.addTelemetryInitializer=function(n){var e={id:t++,fn:n};return r[P](e),{remove:function(){Pe(r,(function(n,t){if(n.id===e.id)return r[q](t,1),-1}))}}},n[kn]=function(e,t){for(var i=!1,o=r[O],a=0;a<o;++a){var u=r[a];if(u)try{if(!1===u.fn[cn](null,[e])){i=!0;break}}catch(c){Fr(t[W](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Le(c),{exception:Tr(c)},!0)}}i||n[N](e,t)},n[X]=function(){o()}})),i}return lo(e,n),e.__ieDyn=1,e}(Go),Xo="Plugins must provide initialize method",Jo="_notificationManager",Qo="SDK is still unloading...",Wo={loggingLevelConsole:1};function $o(n,e){return new bo(e)}function Zo(n,e){var t=!1;return Pe(e,(function(e){if(e===n)return t=!0,-1})),t}var Yo=function(){function n(){var e,t,r,i,o,a,u,c,s,f,l,d,v,h,p,g,y,m,b,S,X=0,J=!1;jt(n,this,(function(n){function Q(t){if(!X&&!J&&(t||n[D]&&n[D].queue[O]>0)){var r=Ke(e.diagnosticLogInterval);r&&r>0||(r=1e4),X=setInterval((function(){clearInterval(X),X=0,rn()}),r)}return X}function W(){t=!1,e=Ve(!0,{},Wo),n[x]=e,n[D]=new Lr(e),n[H]=[],p=new Vo,r=[],i=null,o=null,a=null,u=null,c=null,f=null,s=[],l=null,d=null,v=null,h=!1,g=null,y=Pi("AIBaseCore",!0),m=zo(),S=null}function $(){var t=Lo(en(),e,n);return t[F](Q),t}function Y(t){var r=function(n,e,t){var r,i=[],o={};return Pe(t,(function(t){(se(t)||se(t[T]))&&He(Xo);var r=t[Dn],a=t[E];t&&r&&(se(o[r])?o[r]=a:Kr(n,"Two extensions have same priority #"+r+" - "+o[r]+", "+a)),(!r||r<e)&&i[P](t)})),(r={all:t})[En]=i,r}(n[D],Bo,s);f=r[En],c=null;var i=r.all;if(v=Ue(function(n,e,t){var r=[];if(n&&Pe(n,(function(n){return qo(r,n,t)})),e){var i=[];Pe(e,(function(n){n[Dn]>Bo&&i[P](n)})),qo(r,i,t)}return r}(d,i,n)),l){var o=Ie(i,l);-1!==o&&i[q](o,1),-1!==(o=Ie(f,l))&&f[q](o,1),l._setQueue(v)}else l=function(n,e){function t(){return Lo(null,e[x],e,null)}function r(n,e,t,r){var i=n?n[O]+1:1;function o(){0===--i&&(r&&r(),r=null)}i>0&&Pe(n,(function(n){if(n&&n.queue[O]>0){var r=n.chain,a=e[Z](r);a[F](o),t(a)}else i--})),o()}var i=!1,o={identifier:"ChannelControllerPlugin",priority:Bo,initialize:function(e,t,r,o){i=!0,Pe(n,(function(n){n&&n.queue[O]>0&&ko(Lo(n.chain,e,t),r)}))},isInitialized:function(){return i},processTelemetry:function(e,i){r(n,i||t(),(function(n){n[N](e)}),(function(){i[N](e)}))},update:function(e,t){var i=t||{reason:0};return r(n,e,(function(n){n[N](i)}),(function(){e[N](i)})),!0},pause:function(){r(n,t(),(function(n){n.iterate((function(n){n.pause&&n.pause()}))}),null)},resume:function(){r(n,t(),(function(n){n.iterate((function(n){n.resume&&n.resume()}))}),null)},teardown:function(e,t){var o=t||{reason:0,isAsync:!1};return r(n,e,(function(n){n[N](o)}),(function(){e[N](o),i=!1})),!0},getChannel:function(e){var t=null;return n&&n[O]>0&&Pe(n,(function(n){if(n&&n.queue[O]>0&&(Pe(n.queue,(function(n){if(n[E]===e)return t=n,-1})),t))return-1})),t},flush:function(e,i,o,a){var u=1,c=!1,s=null;function f(){u--,c&&0===u&&(s&&(clearTimeout(s),s=null),i&&i(c),i=null)}return a=a||5e3,r(n,t(),(function(n){n.iterate((function(n){if(n[B]){u++;var t=!1;n[B](e,(function(){t=!0,f()}),o)||t||(e&&null==s?s=setTimeout((function(){s=null,f()}),a):f())}}))}),(function(){c=!0,f()})),!0},_setQueue:function(e){n=e}};return o}(v,n);i[P](l),f[P](l),n[H]=Do(i),l[T](e,n,i),ko($(),i),n[H]=Ue(Do(f||[])).slice(),t&&function(e){var t=Fo(en(),n);t[F](Q),n._updateHook&&!0===n._updateHook(t,e)||t[N](e)}(t)}function nn(e){var t,r=null,i=null;return Pe(n[H],(function(n){if(n[E]===e&&n!==l&&n!==p)return i=n,-1})),!i&&l&&(i=l.getChannel(e)),i&&((t={plugin:i})[on]=function(n){xo(i)[In]=!n},t.isEnabled=function(){var n=xo(i);return!n[z]&&!n[In]},t.remove=function(n,e){var t;void 0===n&&(n=!0);var r=[i],o=((t={reason:1})[V]=n,t);tn(r,o,(function(n){n&&Y({reason:32,removed:r}),e&&e(n)}))},r=t),r}function en(){if(!c){var t=(f||[]).slice();-1===Ie(t,p)&&t[P](p),c=Ko(Do(t),e,n)}return c}function tn(t,r,i){if(t&&t[O]>0){var o=Ro(Ko(t,e,n),n);o[F]((function(){var n=!1,e=[];Pe(s,(function(r,i){Zo(r,t)?n=!0:e[P](r)})),s=e;var r=[];d&&(Pe(d,(function(e,i){var o=[];Pe(e,(function(e){Zo(e,t)?n=!0:o[P](e)})),r[P](o)})),d=r),i&&i(n),Q()})),o[N](r)}else i(!1)}function rn(){if(n[D]&&n[D].queue){var t=n[D].queue.slice(0);n[D].queue[O]=0,Pe(t,(function(t){var r,i=((r={})[C]=g||"InternalMessageId: "+t[j],r.iKey=Ke(e[k]),r.time=Ee(new Date),r.baseType=Ar.dataType,r.baseData={message:t[G]},r);n.track(i)}))}}function an(n,e,t,r){return l?l[B](n,e,t||6,r):(e&&e(!1),!0)}function un(e){var t=n[D];t?(Fr(t,2,73,e),Q()):He(e)}W(),n[I]=function(){return t},n[T]=function(r,o,u,c){h&&He(Qo),n[I]()&&He("Core should not be initialized more than once"),e=r||{},n[x]=e,se(r[k])&&He("Please provide instrumentation key"),i=c,n[Jo]=c,function(){var n=Ke(e.disableDbgExt);!0===n&&b&&(i[L](b),b=null);i&&!b&&!0!==n&&(b=Mr(e),i[A](b))}(),function(){var n=Ke(e.enablePerfMgr);!n&&a&&(a=null);n&&Fe(e,Pn,$o)}(),Fe(e,xn,{}).NotificationManager=i,u&&(n[D]=u);var f=Fe(e,"extensions",[]);(s=[])[P].apply(s,vo(vo([],o),f)),d=Fe(e,wn,[]),Y(null),v&&0!==v[O]||He("No "+wn+" available"),t=!0,n.releaseQueue()},n.getTransmissionControls=function(){var n=[];return v&&Pe(v,(function(e){n[P](e.queue)})),Ue(n)},n.track=function(t){t.iKey=t.iKey||e[k],t[M]=t[M]||Ee(new Date),t.ver=t.ver||"4.0",!h&&n[I]()?$()[N](t):r[P](t)},n[U]=$,n[w]=function(){return i||(i=function(){var n;return _(((n={})[A]=function(n){},n[L]=function(n){},n[On]=function(n){},n[Mn]=function(n,e){},n[Nn]=function(n,e){},n))}(),n[Jo]=i),i},n[A]=function(n){i&&i[A](n)},n[L]=function(n){i&&i[L](n)},n.getCookieMgr=function(){return u||(u=ti(e,n[D])),u},n.setCookieMgr=function(n){u=n},n[Rn]=function(){if(!o&&!a&&Ke(e.enablePerfMgr)){var t=Ke(e[Pn]);ve(t)&&(a=t(n,n[w]()))}return o||a||yo},n.setPerfMgr=function(n){o=n},n.eventCnt=function(){return r[O]},n.releaseQueue=function(){if(t&&r[O]>0){var n=r;r=[],Pe(n,(function(n){$()[N](n)}))}},n.pollInternalLogs=function(n){return g=n||null,J=!1,X&&(clearInterval(X),X=null),Q(!0)},n[R]=function(){J=!0,X&&(clearInterval(X),X=0,rn())},je(n,(function(){return p}),["addTelemetryInitializer"]),n.unload=function(e,r,i){var o;void 0===e&&(e=!0),t||He("SDK is not initialized"),h&&He(Qo);var a=((o={reason:50})[V]=e,o.flushComplete=!1,o),u=Ro(en(),n);function c(e){a.flushComplete=e,h=!0,m.run(u,a),n[R](),u[N](a)}u[F]((function(){W(),r&&r(a)}),n),rn(),an(e,c,6,i)||c(!1)},n[K]=nn,n.addPlugin=function(n,e,t,r){if(!n)return r&&r(!1),void un(Xo);var i=nn(n[E]);if(i&&!e)return r&&r(!1),void un("Plugin ["+n[E]+"] is already loaded!");var o={reason:16};function a(e){s[P](n),o.added=[n],Y(o),r&&r(!0)}if(i){var u=[i.plugin];tn(u,{reason:2,isAsync:!!t},(function(n){n?(o.removed=u,o.reason|=32,a()):r&&r(!1)}))}else a()},n.evtNamespace=function(){return y},n[B]=an,n.getTraceCtx=function(n){return S||(S=function(n){var e={};return{getName:function(){return e[C]},setName:function(t){n&&n.setName(t),e[C]=t},getTraceId:function(){return e[Sn]},setTraceId:function(t){n&&n.setTraceId(t),Eo(t)&&(e[Sn]=t)},getSpanId:function(){return e[_n]},setSpanId:function(t){n&&n.setSpanId(t),Po(t)&&(e[_n]=t)},getTraceFlags:function(){return e[Tn]},setTraceFlags:function(t){n&&n.setTraceFlags(t),e[Tn]=t}}}()),S},n.setTraceCtx=function(n){S=n||null},ze(n,"addUnloadCb",(function(){return m}),"add")}))}return n.__ieDyn=1,n}();function na(n,e,t,r){Pe(n,(function(n){if(n&&n[e])if(t)setTimeout((function(){return r(n)}),0);else try{r(n)}catch(i){}}))}var ea,ta=function(){function n(e){this.listeners=[];var t=!!(e||{}).perfEvtsSendAll;jt(n,this,(function(n){n[A]=function(e){n.listeners[P](e)},n[L]=function(e){for(var t=Ie(n[pn],e);t>-1;)n.listeners[q](t,1),t=Ie(n[pn],e)},n[On]=function(e){na(n[pn],On,!0,(function(n){n[On](e)}))},n[Mn]=function(e,t){na(n[pn],Mn,!0,(function(n){n[Mn](e,t)}))},n[Nn]=function(e,t){na(n[pn],Nn,t,(function(n){n[Nn](e,t)}))},n[Un]=function(e){e&&(!t&&e[gn]()||na(n[pn],Un,!1,(function(n){e[V]?setTimeout((function(){return n[Un](e)}),0):n[Un](e)})))}}))}return n.__ieDyn=1,n}(),ra=function(n){function e(){var t=n.call(this)||this;return jt(e,t,(function(n,e){function t(e){var t=n[w]();t&&t[Mn]([e],2)}n[T]=function(n,t,r,i){e[T](n,t,r||new Lr(n),i||new ta(n))},n.track=function(r){_o(n[Rn](),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(t(r),He("Invalid telemetry item")),function(n){se(n[C])&&(t(n),He("telemetry name required"))}(r),e.track(r)}),(function(){return{item:r}}),!r.sync)}})),t}return lo(e,n),e.__ieDyn=1,e}(Yo),ia="",oa="version",aa="properties",ua="3.2.12",ca="1DS-Web-JS-"+ua,sa="withCredentials",fa=((ea={})[0]=0,ea[2]=6,ea[1]=1,ea[3]=7,ea[4098]=6,ea[4097]=1,ea[4099]=7,ea);Boolean(vr()),Boolean(dr());function la(n){return!(n===ia||se(n))}function da(n){if(n){var e=n.indexOf("-");if(e>-1)return n.substring(0,e)}return ia}function va(n){return!!(n&&Te(n)&&n>=1&&n<=4)}function ha(n,e,t){if(!e&&!la(e)||"string"!==typeof n)return null;var r=typeof e;if("string"===r||"number"===r||"boolean"===r||be(e))e={value:e};else if("object"!==r||y.call(e,"value")){if(se(e.value)||e.value===ia||!_e(e.value)&&!Te(e.value)&&!Ce(e.value)&&!be(e.value))return null}else e={value:t?JSON.stringify(e):e};if(be(e.value)&&!ba(e.value))return null;if(!se(e.kind)){if(be(e.value)||!ma(e.kind))return null;e.value=e.value.toString()}return e}function pa(n,e,t){var r=-1;if(!ce(n))if(e>0&&(32===e?r=8192:e<=13&&(r=e<<5)),function(n){if(n>=0&&n<=9)return!0;return!1}(t))-1===r&&(r=0),r|=t;else{var i=fa[_a(n)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function ga(n,e,t,r,i){var o={},a=!1,u=0,c=arguments.length,s=arguments;for("[object Boolean]"===Object[f].toString.call(s[0])&&(a=s[0],u++);u<c;u++){pe(s[u],(function(n,e){a&&e&&de(e)?be(e)?(o[n]=o[n]||[],Pe(e,(function(e,t){e&&de(e)?o[n][t]=ga(!0,o[n][t],e):o[n][t]=e}))):o[n]=ga(!0,o[n],e):o[n]=e}))}return o}var ya=uo;function ma(n){return 0===n||n>0&&n<=13||32===n}function ba(n){return n.length>0}function Sa(n,e){var t=n;t.timings=t.timings||{},t.timings.processTelemetryStart=t.timings.processTelemetryStart||{},t.timings.processTelemetryStart[e]=ya()}function _a(n){var e=0;if(null!==n&&void 0!==n){var t=typeof n;"string"===t?e=1:"number"===t?e=2:"boolean"===t?e=3:t===c&&(e=4,be(n)?(e=4096,n.length>0&&(e|=_a(n[0]))):y.call(n,"value")&&(e=8192|_a(n.value)))}return e}var Ta=function(n){function e(){var t=n.call(this)||this;return t.pluginVersionStringArr=[],jt(e,t,(function(n,e){n.logger&&n.logger.queue||(n.logger=new Lr({loggingLevelConsole:1})),n.initialize=function(t,r,i,o){_o(n,(function(){return"AppInsightsCore.initialize"}),(function(){var a=n.pluginVersionStringArr;if(t){t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var u=t.propertyStorageOverride;!u||u.getProperty&&u.setProperty||He("Invalid property storage override passed."),t.channels&&Pe(t.channels,(function(n){n&&Pe(n,(function(n){if(n.identifier&&n.version){var e=n.identifier+"="+n.version;a.push(e)}}))}))}n.getWParam=function(){return"undefined"!==typeof document||t.enableWParam?0:-1},r&&Pe(r,(function(n){if(n&&n.identifier&&n.version){var e=n.identifier+"="+n.version;a.push(e)}})),n.pluginVersionString=a.join(";"),n.pluginVersionStringArr=a;try{e.initialize(t,r,i,o),n.pollInternalLogs("InternalLog")}catch(f){var c=n.logger,s=Tr(f);-1!==s.indexOf("channels")&&(s+="\n - Channels must be provided through config.channels only!"),Fr(c,1,514,"SDK Initialization Failed - no telemetry will be sent: "+s)}}),(function(){return{config:t,extensions:r,logger:i,notificationManager:o}}))},n.track=function(t){_o(n,(function(){return"AppInsightsCore.track"}),(function(){var r=t;if(r){r.timings=r.timings||{},r.timings.trackStart=ya(),va(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=ca;var o=r.baseData=r.baseData||{};o[aa]=o[aa]||{};var a=o[aa];a[oa]=a[oa]||n.pluginVersionString||ia}e.track(r)}),(function(){return{item:t}}),!t.sync)}})),t}return lo(e,n),e.__ieDyn=1,e}(ra),Ca=Ta;var wa=function(n){var e,t={};return pe(n,(function(n,e){t[n]=e,t[e]=n})),e=t,Xn&&pe(e,(function(n,e){(be(e)||de(e))&&Xn(e)})),Ue(e)}({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Ea="REAL_TIME",Pa="",Ia="POST",xa="drop",ka="send",Da="requeue",Oa="rspFail",Ma="application/x-json-stream",Na="cache-control",Ua="content-type",Aa="kill-tokens",La="kill-duration",Ra="time-delta-millis",Fa="client-version",Ka="client-id",Ba="time-delta-to-apply-millis",Ha="upload-time",qa="apikey",za="AuthMsaDeviceTicket",ja="AuthXToken",Ga="msfpc",Va="trace",Xa="user";function Ja(n){var e=(n.ext||{}).intweb;return e&&la(e[Ga])?e[Ga]:null}function Qa(n){for(var e=null,t=0;null===e&&t<n.length;t++)e=Ja(n[t]);return e}var Wa=function(){function n(e,t){var r=t?[].concat(t):[],i=this,o=Qa(r);i.iKey=function(){return e},i.Msfpc=function(){return o||Pa},i.count=function(){return r.length},i.events=function(){return r},i.addEvent=function(n){return!!n&&(r.push(n),o||(o=Ja(n)),!0)},i.split=function(t,i){var a;if(t<r.length){var u=r.length-t;se(i)||(u=i<u?i:u),a=r.splice(t,u),o=Qa(r)}return new n(e,a)}}return n.create=function(e,t){return new n(e,t)},n}(),$a=function(){function n(){var e=!0,t=!0,r=!0,i="use-collector-delta",o=!1;jt(n,this,(function(n){n.allowRequestSending=function(){return e},n.firstRequestSent=function(){r&&(r=!1,o||(e=!1))},n.shouldAddClockSkewHeaders=function(){return t},n.getClockSkewHeaderValue=function(){return i},n.setClockSkew=function(n){o||(n?(i=n,t=!0,o=!0):t=!1,e=!0)}}))}return n.__ieDyn=1,n}(),Za=function(){function n(){var e={};jt(n,this,(function(n){n.setKillSwitchTenants=function(n,t){if(n&&t)try{var r=function(n){var e=[];return n&&Pe(n,(function(n){e.push(xe(n))})),e}(n.split(","));if("this-request-only"===t)return r;for(var i=1e3*parseInt(t,10),o=0;o<r.length;++o)e[r[o]]=Ae()+i}catch(a){return[]}return[]},n.isTenantKilled=function(n){var t=e,r=xe(n);return void 0!==t[r]&&t[r]>Ae()||(delete t[r],!1)}}))}return n.__ieDyn=1,n}();function Ya(n){var e,t=Math.floor(1200*Math.random())+2400;return e=Math.pow(2,n)*t,Math.min(e,6e5)}var nu,eu=2e6,tu=Math.min(eu,65e3),ru="metadata",iu="f",ou=/\./,au=function(){function n(e,t,r,i){var o="data",a="baseData",u=!!i,c=t,s={};jt(n,this,(function(n){function t(n,e,i,o,a,f,l){pe(n,(function(n,d){var v=null;if(d||la(d)){var h=i,p=n,g=a,y=e;if(u&&!o&&ou.test(n)){var m=n.split("."),b=m.length;if(b>1){g&&(g=g.slice());for(var S=0;S<b-1;S++){var _=m[S];y=y[_]=y[_]||{},h+="."+_,g&&g.push(_)}p=m[b-1]}}var T=o&&function(n,e){var t=s[n];return void 0===t&&(n.length>=7&&(t=ye(n,"ext.metadata")||ye(n,"ext.web")),s[n]=t),t}(h);if(v=!T&&c&&c.handleField(h,p)?c.value(h,p,d,r):ha(p,d,r)){var C=v.value;if(y[p]=C,f&&f(g,p,v),l&&"object"===typeof C&&!be(C)){var w=g;w&&(w=w.slice()).push(p),t(d,C,h+"."+p,o,w,f,l)}}}}))}n.createPayload=function(n,e,t,r,i,o){return{apiKeys:[],payloadBlob:Pa,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:n,isTeardown:e,isSync:t,isBeacon:r,sendType:o,sendReason:i}},n.appendPayload=function(t,r,i){var o=t&&r&&!t.overflow;return o&&_o(e,(function(){return"Serializer:appendPayload"}),(function(){for(var e=r.events(),o=t.payloadBlob,a=t.numEvents,u=!1,c=[],s=[],f=t.isBeacon,l=f?65e3:3984588,d=f?tu:eu,v=0,h=0;v<e.length;){var p=e[v];if(p){if(a>=i){t.overflow=r.split(v);break}var g=n.getEventBlob(p);if(g&&g.length<=d){var y=g.length;if(o.length+y>l){t.overflow=r.split(v);break}o&&(o+="\n"),o+=g,++h>20&&(o.substr(0,1),h=0),u=!0,a++}else g?c.push(p):s.push(p),e.splice(v,1),v--}v++}if(c&&c.length>0&&t.sizeExceed.push(Wa.create(r.iKey(),c)),s&&s.length>0&&t.failedEvts.push(Wa.create(r.iKey(),s)),u){t.batches.push(r),t.payloadBlob=o,t.numEvents=a;var m=r.iKey();-1===Ie(t.apiKeys,m)&&t.apiKeys.push(m)}}),(function(){return{payload:t,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),o},n.getEventBlob=function(n){try{return _o(e,(function(){return"Serializer.getEventBlob"}),(function(){var e={};e.name=n.name,e.time=n.time,e.ver=n.ver,e.iKey="o:"+da(n.iKey);var r={},i=n.ext;i&&(e.ext=r,pe(i,(function(n,e){t(e,r[n]={},"ext."+n,!0,null,null,!0)})));var u=e[o]={};u.baseType=n.baseType;var c=u[a]={};return t(n.baseData,c,a,!1,[a],(function(n,e,t){uu(r,n,e,t)}),true),t(n.data,u,o,!1,[],(function(n,e,t){uu(r,n,e,t)}),true),JSON.stringify(e)}),(function(){return{item:n}}))}catch(r){return null}}}))}return n.__ieDyn=1,n}();function uu(n,e,t,r){if(r&&n){var i=pa(r.value,r.kind,r.propertyType);if(i>-1){var o=n[ru];o||(o=n[ru]={f:{}});var a=o[iu];if(a||(a=o[iu]={}),e)for(var u=0;u<e.length;u++){var c=e[u];a[c]||(a[c]={f:{}});var s=a[c][iu];s||(s=a[c][iu]={}),a=s}a=a[t]={},be(r.value)?a.a={t:i}:a.t=i}}}var cu="sendAttempt",su="&NoResponseBody=true",fu=((nu={})[1]=Da,nu[100]=Da,nu[200]="sent",nu[8004]=xa,nu[8003]=xa,nu),lu={},du={};function vu(n,e,t){lu[n]=e,!1!==t&&(du[e]=n)}function hu(n){try{return n.responseText}catch(e){}return Pa}function pu(n,e){var t=!1;if(n&&e){var r=Oe(n);if(r&&r.length>0)for(var i=e.toLowerCase(),o=0;o<r.length;o++){var a=r[o];if(a&&le(e,a)&&a.toLowerCase()===i){t=!0;break}}}return t}function gu(n,e,t,r){e&&t&&t.length>0&&(r&&lu[e]?(n.hdrs[lu[e]]=t,n.useHdrs=!0):n.url+="&"+e+"="+t)}function yu(n,e){return e&&(Te(e)?n=[e].concat(n):be(e)&&(n=e.concat(n))),n}vu(za,za,!1),vu(Fa,Fa),vu(Ka,"Client-Id"),vu(qa,qa),vu(Ba,Ba),vu(Ha,Ha),vu(ja,ja);var mu=function(){function n(e,t,r,i,o){this._responseHandlers=[];var a,u,c,f,l,d,v,h,p,g,y="?cors=true&"+Ua.toLowerCase()+"="+Ma,m=new Za,b=!1,S=new $a,_=!1,T=0,C=!0,w=[],E={},P=[],I=null,x=!1,k=!1,D=!1;jt(n,this,(function(n){var O=!0;function M(n,e){for(var t=0,r=null,i=0;null==r&&i<n.length;)1===(t=n[i])?Er()?r=N:Pr()&&(r=A):2===t&&wr(e)&&(!e||e&&!h)?r=U:_&&3===t&&Cr()&&(r=R),i++;return r?{_transport:t,_isSync:e,sendPOST:r}:null}function N(n,e,t){var r=new XDomainRequest;r.open(Ia,n.urlString),n.timeout&&(r.timeout=n.timeout),r.onload=function(){var n=hu(r);L(e,200,{},n),Q(n)},r.onerror=function(){L(e,400,{})},r.ontimeout=function(){L(e,500,{})},r.onprogress=function(){},t?r.send(n.data):o.set((function(){r.send(n.data)}),0)}function U(n,e,t){var r,i=n.urlString,a=!1,u=!1,c=((r={body:n.data,method:Ia}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);t&&(c.keepalive=!0,2===n._sendReason&&(a=!0,g&&(i+=su))),O&&(c.credentials="include"),n.headers&&Oe(n.headers).length>0&&(c.headers=n.headers),fetch(i,c).then((function(n){var t={},r=Pa,i=n.headers;i&&i.forEach((function(n,e){t[e]=n})),n.body&&n.text().then((function(n){r=n})),u||(u=!0,L(e,n.status,t,r),Q(r))})).catch((function(n){u||(u=!0,L(e,0,{}))})),a&&!u&&(u=!0,L(e,200,{})),!u&&n.timeout>0&&o.set((function(){u||(u=!0,L(e,500,{}))}),n.timeout)}function A(n,e,t){var r=n.urlString;function i(n,e,t){if(!n[t]&&e&&e.getResponseHeader){var r=e.getResponseHeader(t);r&&(n[t]=xe(r))}return n}function o(n){var e={};return n.getAllResponseHeaders?e=function(n){var e={};if(_e(n)){Pe(xe(n).split(/[\r\n]+/),(function(n){if(n){var t=n.indexOf(": ");if(-1!==t){var r=xe(n.substring(0,t)).toLowerCase(),i=xe(n.substring(t+1));e[r]=i}else e[xe(n)]=1}}))}return e}(n.getAllResponseHeaders()):(e=i(e,n,Ra),e=i(e,n,La),e=i(e,n,"kill-duration-seconds")),e}function a(n,t){L(e,n.status,o(n),t)}t&&n.disableXhrSync&&(t=!1);var u=function(n,e,t,r,i,o){function a(n,e,t){try{n[e]=t}catch(r){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var u=new XMLHttpRequest;return r&&a(u,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",r),t&&a(u,sa,t),u.open(n,e,!i),t&&a(u,sa,t),!i&&o&&a(u,"timeout",o),u}(Ia,r,O,!0,t,n.timeout);pe(n.headers,(function(n,e){u.setRequestHeader(n,e)})),u.onload=function(){var n=hu(u);a(u,n),Q(n)},u.onerror=function(){a(u)},u.ontimeout=function(){a(u)},u.send(n.data)}function L(n,e,t,r){try{n(e,t,r)}catch(i){Fr(u,2,518,Tr(i))}}function R(n,e,t){var r=200,i=n._thePayload,o=n.urlString+(g?su:Pa);try{var a=pr();if(!a.sendBeacon(o,n.data))if(i){var c=[];Pe(i.batches,(function(n){if(c&&n&&n.count()>0){for(var e=n.events(),t=0;t<e.length;t++)if(!a.sendBeacon(o,I.getEventBlob(e[t]))){c.push(n.split(t));break}}else c.push(n.split(0))})),W(c,8003,i.sendType,!0)}else r=0}catch(s){Kr(u,"Failed to send telemetry using sendBeacon API. Ex:"+Tr(s)),r=0}finally{L(e,r,{},Pa)}}function F(n){return 2===n||3===n}function K(n){return k&&F(n)&&(n=2),n}function B(){return!b&&T<t}function H(){var n=P;return P=[],n}function q(n,e,t){var r=!1;return n&&n.length>0&&!b&&c[e]&&I&&(r=0!==e||B()&&(t>0||S.allowRequestSending())),r}function z(n){var e={};return n&&Pe(n,(function(n,t){e[t]={iKey:n.iKey(),evts:n.events()}})),e}function j(n,t,r,i,o){if(n&&0!==n.length)if(b)W(n,1,i);else{i=K(i);try{var a=n,s=0!==i;_o(f,(function(){return"HttpManager:_sendBatches"}),(function(a){a&&(n=n.slice(0));for(var u=[],f=null,l=ya(),d=c[i]||(s?c[1]:c[0]),v=d&&d._transport,h=p&&(k||F(i)||3===v||d._isSync&&2===v);q(n,i,t);){var g=n.shift();g&&g.count()>0&&(m.isTenantKilled(g.iKey())?u.push(g):(f=f||I.createPayload(t,r,s,h,o,i),I.appendPayload(f,g,e)?null!==f.overflow&&(n=[f.overflow].concat(n),f.overflow=null,X(f,l,ya(),o),l=ya(),f=null):(X(f,l,ya(),o),l=ya(),n=[g].concat(n),f=null)))}f&&X(f,l,ya(),o),n.length>0&&(P=n.concat(P)),W(u,8004,i)}),(function(){return{batches:z(a),retryCount:t,isTeardown:r,isSynchronous:s,sendReason:o,useSendBeacon:F(i),sendType:i}}),!s)}catch(l){Fr(u,2,48,"Unexpected Exception sending batch: "+Tr(l))}}}function G(n,e){var t={url:y,hdrs:{},useHdrs:!1};e?(t.hdrs=ga(t.hdrs,E),t.useHdrs=Oe(t.hdrs).length>0):pe(E,(function(n,e){du[n]?gu(t,du[n],e,!1):(t.hdrs[n]=e,t.useHdrs=!0)})),gu(t,Ka,"NO_AUTH",e),gu(t,Fa,ca,e);var r=Pa;Pe(n.apiKeys,(function(n){r.length>0&&(r+=","),r+=n})),gu(t,qa,r,e),gu(t,Ha,Ae().toString(),e);var i=function(n){for(var e=0;e<n.batches.length;e++){var t=n.batches[e].Msfpc();if(t)return encodeURIComponent(t)}return Pa}(n);if(la(i)&&(t.url+="&ext.intweb.msfpc="+i),S.shouldAddClockSkewHeaders()&&gu(t,Ba,S.getClockSkewHeaderValue(),e),f.getWParam){var o=f.getWParam();o>=0&&(t.url+="&w="+o)}for(var a=0;a<w.length;a++)t.url+="&"+w[a].name+"="+w[a].value;return t}function V(n,e,t){n[e]=n[e]||{},n[e][a.identifier]=t}function X(e,t,i,o){if(e&&e.payloadBlob&&e.payloadBlob.length>0){var l=!!n.sendHook,p=c[e.sendType];!F(e.sendType)&&e.isBeacon&&2===e.sendReason&&(p=c[2]||c[3]||p);var g=D;(e.isBeacon||3===p._transport)&&(g=!1);var y=G(e,g);g=g||y.useHdrs;var b=ya();_o(f,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var c=0;c<e.batches.length;c++)for(var _=e.batches[c].events(),w=0;w<_.length;w++){var E=_[w];if(x){var P=E.timings=E.timings||{};V(P,"sendEventStart",b),V(P,"serializationStart",t),V(P,"serializationCompleted",i)}E[cu]>0?E[cu]++:E[cu]=1}W(e.batches,1e3+(o||0),e.sendType,!0);var I={data:e.payloadBlob,urlString:y.url,headers:y.hdrs,_thePayload:e,_sendReason:o,timeout:d,disableXhrSync:v,disableFetchKeepAlive:h};g&&(pu(I.headers,Na)||(I.headers[Na]="no-cache, no-store"),pu(I.headers,Ua)||(I.headers[Ua]=Ma));var D=null;p&&(D=function(t){S.firstRequestSent();var i=function(t,i){!function(e,t,i,o){var u=9e3,c=null,f=!1,l=!1;try{var d=!0;if(typeof e!==s){if(t){S.setClockSkew(t[Ra]);var v=t[La]||t["kill-duration-seconds"];Pe(m.setKillSwitchTenants(t[Aa],v),(function(n){Pe(i.batches,(function(e){if(e.iKey()===n){c=c||[];var t=e.split(0);i.numEvents-=t.count(),c.push(t)}}))}))}if(200==e||204==e)return void(u=200);((p=e)>=300&&p<500&&408!=p&&429!=p||501==p||505==p||i.numEvents<=0)&&(d=!1),u=9e3+e%1e3}if(d){u=100;var h=i.retryCnt;0===i.sendType&&(h<r?(f=!0,J((function(){0===i.sendType&&T--,j(i.batches,h+1,i.isTeardown,k?2:i.sendType,5)}),k,Ya(h))):(l=!0,k&&(u=8001)))}}finally{f||(S.setClockSkew(),function(e,t,r,i){try{i&&a._backOffTransmission(),200===t&&(i||e.isSync||a._clearBackOff(),function(n){if(x){var e=ya();Pe(n,(function(n){n&&n.count()>0&&function(n,e){x&&Pe(n,(function(n){V(n.timings=n.timings||{},"sendEventCompleted",e)}))}(n.events(),e)}))}}(e.batches)),W(e.batches,t,e.sendType,!0)}finally{0===e.sendType&&(T--,5!==r&&n.sendQueuedRequests(e.sendType,r))}}(i,u,o,l)),W(c,8004,i.sendType)}var p}(t,i,e,o)},c=e.isTeardown||e.isSync;try{p.sendPOST(t,i,c),n.sendListener&&n.sendListener(I,t,c,e.isBeacon)}catch(f){Kr(u,"Unexpected exception sending payload. Ex:"+Tr(f)),L(i,0,{})}}),_o(f,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(D)if(0===e.sendType&&T++,l&&!e.isBeacon&&3!==p._transport){var t={data:I.data,urlString:I.urlString,headers:ga({},I.headers),timeout:I.timeout,disableXhrSync:I.disableXhrSync,disableFetchKeepAlive:I.disableFetchKeepAlive},r=!1;_o(f,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{n.sendHook(t,(function(n){r=!0,C||n._thePayload||(n._thePayload=n._thePayload||I._thePayload,n._sendReason=n._sendReason||I._sendReason),D(n)}),e.isSync||e.isTeardown)}catch(i){r||D(I)}}))}else D(I)}))}),(function(){return{thePayload:e,serializationStart:t,serializationCompleted:i,sendReason:o}}),e.isSync)}e.sizeExceed&&e.sizeExceed.length>0&&W(e.sizeExceed,8003,e.sendType),e.failedEvts&&e.failedEvts.length>0&&W(e.failedEvts,8002,e.sendType)}function J(n,e,t){e?n():o.set(n,t)}function Q(e){var t=n._responseHandlers;try{for(var r=0;r<t.length;r++)try{t[r](e)}catch(o){Fr(u,1,519,"Response handler failed: "+o)}if(e){var i=JSON.parse(e);la(i.webResult)&&la(i.webResult[Ga])&&l.set("MSFPC",i.webResult[Ga],31536e3)}}catch(a){}}function W(n,e,t,r){if(n&&n.length>0&&i){var o=i[function(n){var e=fu[n];la(e)||(e="oth",n>=9e3&&n<=9999?e=Oa:n>=8e3&&n<=8999?e=xa:n>=1e3&&n<=1999&&(e=ka));return e}(e)];if(o){var a=0!==t;_o(f,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){J((function(){try{o.call(i,n,e,a,t)}catch(r){Fr(u,1,74,"send request notification failed: "+r)}}),r||a,0)}),(function(){return{batches:z(n),reason:e,isSync:a,sendSync:r,sendType:t}}),!a)}}}n.initialize=function(n,e,t,r,i){var o;i||(i={}),y=n+y,D=!!ce(i.avoidOptions)||!i.avoidOptions,f=e,l=e.getCookieMgr(),x=!f.config.disableEventTimings;var s=!!f.config.enableCompoundKey;u=(a=t).diagLog();var m=i.valueSanitizer,b=i.stringifyObjects;ce(i.enableCompoundKey)||(s=!!i.enableCompoundKey),d=i.xhrTimeout,v=!!i.disableXhrSync,h=!!i.disableFetchKeepAlive,g=!1!==i.addNoResponse,_=!Sr(),I=new au(f,m,b,s),se(i.useSendBeacon)||(_=!!i.useSendBeacon);var S=r,T=i.alwaysUseXhrOverride?r:null,w=i.alwaysUseXhrOverride?r:null,E=[3,2];if(!r){C=!1;var P=gr();P&&P.protocol&&"file:"===P.protocol.toLowerCase()&&(O=!1);var k=[];Sr()?(k=[2,1],E=[2,1,3]):k=[1,2,3],(r=M(k=yu(k,i.transports),!1))||Kr(u,"No available transport to send events"),S=M(k,!0)}T||(T=M(E=yu(E,i.unloadTransports),!0)),p=!C&&(_&&Cr()||!h&&wr(!0)),(o={})[0]=r,o[1]=S||M([1,2,3],!0),o[2]=T||S||M([1],!0),o[3]=w||M([2,3],!0)||S||M([1],!0),c=o},n._getDbgPlgTargets=function(){return[c[0],m,I,c]},n.addQueryStringParameter=function(n,e){for(var t=0;t<w.length;t++)if(w[t].name===n)return void(w[t].value=e);w.push({name:n,value:e})},n.addHeader=function(n,e){E[n]=e},n.canSendRequest=function(){return B()&&S.allowRequestSending()},n.sendQueuedRequests=function(n,e){ce(n)&&(n=0),k&&(n=K(n),e=2),q(P,n,0)&&j(H(),0,!1,n,e||0)},n.isCompletelyIdle=function(){return!b&&0===T&&0===P.length},n.setUnloading=function(n){k=n},n.addBatch=function(n){if(n&&n.count()>0){if(m.isTenantKilled(n.iKey()))return!1;P.push(n)}return!0},n.teardown=function(){P.length>0&&j(H(),0,!0,2,2)},n.pause=function(){b=!0},n.resume=function(){b=!1,n.sendQueuedRequests(0,4)},n.sendSynchronousBatch=function(n,e,t){n&&n.count()>0&&(se(e)&&(e=1),k&&(e=K(e),t=2),j([n],0,!1,e,t||0))}}))}return n.__ieDyn=1,n}();function bu(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout(n,e,t)}function Su(n){clearTimeout(n)}function _u(n,e){return{set:n||bu,clear:e||Su}}var Tu="eventsDiscarded",Cu="overrideInstrumentationKey",wu="maxEventRetryAttempts",Eu="maxUnloadEventRetryAttempts",Pu=function(n){function e(){var t,r=n.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.12";var i,o,a,u,c,s,f,l=!1,d=[],v=null,h=!1,p=0,g=500,y=0,m=1e4,b={},S=Ea,_=null,T=null,C=0,w=0,E={},P=-1,I=!0,x=!1,k=6,D=2;return jt(e,r,(function(n,e){function r(n){"beforeunload"!==(n||dr().event).type&&(x=!0,o.setUnloading(x)),K(2,2)}function O(n){x=!1,o.setUnloading(x)}function M(n,e){if(n.sendAttempt||(n.sendAttempt=0),n.latency||(n.latency=1),n.ext&&n.ext[Va]&&delete n.ext[Va],n.ext&&n.ext[Xa]&&n.ext[Xa].id&&delete n.ext[Xa].id,I&&(n.ext=Ge(n.ext),n.baseData&&(n.baseData=Ge(n.baseData)),n.data&&(n.data=Ge(n.data))),n.sync)if(C||h)n.latency=3,n.sync=!1;else if(o)return I&&(n=Ge(n)),void o.sendSynchronousBatch(Wa.create(n.iKey,[n]),!0===n.sync?1:n.sync,3);var t=n.latency,r=y,i=m;4===t&&(r=p,i=g);var a=!1;if(r<i)a=!q(n,e);else{var u=1,c=20;4===t&&(u=4,c=1),a=!0,function(n,e,t,r){for(;t<=e;){var i=B(n,e,!0);if(i&&i.count()>0){var o=i.split(0,r),a=o.count();if(a>0)return 4===t?p-=a:y-=a,$(Tu,[o],wa.QueueFull),!0}t++}return z(),!1}(n.iKey,n.latency,u,c)&&(a=!q(n,e))}a&&W(Tu,[n],wa.QueueFull)}function N(n,e,t){var r=j(n,e,t);return o.sendQueuedRequests(e,t),r}function U(){return y>0}function A(){if(P>=0&&j(P,0,c)&&o.sendQueuedRequests(0,c),p>0&&!T&&!h){var n=b[S][2];n>=0&&(T=R((function(){T=null,N(4,0,1),A()}),n))}var e=b[S][1];!_&&!v&&e>=0&&!h&&(U()?_=R((function(){_=null,N(0===w?3:1,0,1),w++,w%=2,A()}),e):w=0)}function L(){t=null,l=!1,d=[],v=null,h=!1,p=0,g=500,y=0,m=1e4,b={},S=Ea,_=null,T=null,C=0,w=0,i=null,E={},a=void 0,u=0,P=-1,c=null,I=!0,x=!1,k=6,D=2,s=null,f=_u(),o=new mu(500,2,1,{requeue:J,send:Z,sent:Y,drop:nn,rspFail:en,oth:tn},f),X(),E[4]={batches:[],iKeyMap:{}},E[3]={batches:[],iKeyMap:{}},E[2]={batches:[],iKeyMap:{}},E[1]={batches:[],iKeyMap:{}},rn()}function R(n,e){0===e&&C&&(e=1);var t=1e3;return C&&(t=Ya(C-1)),f.set(n,e*t)}function F(){return null!==_&&(f.clear(_),_=null,w=0,!0)}function K(n,e){F(),v&&(f.clear(v),v=null),h||N(1,n,e)}function B(n,e,t){var r=E[e];r||(r=E[e=1]);var i=r.iKeyMap[n];return!i&&t&&(i=Wa.create(n),r.batches.push(i),r.iKeyMap[n]=i),i}function H(e,t){o.canSendRequest()&&!C&&(a>0&&y>a&&(t=!0),t&&null==v&&n.flush(e,null,20))}function q(n,e){I&&(n=Ge(n));var t=n.latency,r=B(n.iKey,t,!0);return!!r.addEvent(n)&&(4!==t?(y++,e&&0===n.sendAttempt&&H(!n.sync,u>0&&r.count()>=u)):p++,!0)}function z(){for(var n=0,e=0,t=function(t){var r=E[t];r&&r.batches&&Pe(r.batches,(function(r){4===t?n+=r.count():e+=r.count()}))},r=1;r<=4;r++)t(r);y=e,p=n}function j(e,t,r){var i=!1,a=0===t;return!a||o.canSendRequest()?_o(n.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var n=[],t=4;t>=e;){var r=E[t];r&&r.batches&&r.batches.length>0&&(Pe(r.batches,(function(e){o.addBatch(e)?i=i||e&&e.count()>0:n=n.concat(e.events()),4===t?p-=e.count():y-=e.count()})),r.batches=[],r.iKeyMap={}),t--}n.length>0&&W(Tu,n,wa.KillSwitch),i&&P>=e&&(P=-1,c=0)}),(function(){return{latency:e,sendType:t,sendReason:r}}),!a):(P=P>=0?Math.min(P,e):e,c=Math.max(c,r)),i}function G(n,e){N(1,0,e),z(),V((function(){n&&n(),d.length>0?v=R((function(){v=null,G(d.shift(),e)}),0):(v=null,A())}))}function V(n){o.isCompletelyIdle()?n():v=R((function(){v=null,V(n)}),.25)}function X(){(b={})[Ea]=[2,1,0],b.NEAR_REAL_TIME=[6,3,0],b.BEST_EFFORT=[18,9,0]}function J(e,t){var r=[],i=k;x&&(i=D),Pe(e,(function(e){e&&e.count()>0&&Pe(e.events(),(function(e){e&&(e.sync&&(e.latency=4,e.sync=!1),e.sendAttempt<i?(Sa(e,n.identifier),M(e,!1)):r.push(e))}))})),r.length>0&&W(Tu,r,wa.NonRetryableStatus),x&&K(2,2)}function Q(e,t){var r=n._notificationManager||{},i=r[e];if(i)try{i.apply(r,t)}catch(o){Fr(n.diagLog(),1,74,e+" notification failed: "+o)}}function W(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e&&e.length>0&&Q(n,[e].concat(t))}function $(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e&&e.length>0&&Pe(e,(function(e){e&&e.count()>0&&Q(n,[e.events()].concat(t))}))}function Z(n,e,t){n&&n.length>0&&Q("eventsSendRequest",[e>=1e3&&e<=1999?e-1e3:0,!0!==t])}function Y(n,e){$("eventsSent",n,e),A()}function nn(n,e){$(Tu,n,e>=8e3&&e<=8999?e-8e3:wa.Unknown)}function en(n){$(Tu,n,wa.NonRetryableStatus),A()}function tn(n,e){$(Tu,n,wa.Unknown),A()}function rn(){u=t&&t.disableAutoBatchFlushLimit?0:Math.max(1500,m/6)}L(),n._getDbgPlgTargets=function(){return[o]},n.initialize=function(u,c,l){_o(c,(function(){return"PostChannel:initialize"}),(function(){var d=c;e.initialize(u,c,l);try{c.addUnloadCb;s=$i(Pi(n.identifier),c.evtNamespace&&c.evtNamespace());var v=n._getTelCtx();u.extensionConfig[n.identifier]=u.extensionConfig[n.identifier]||{},t=v.getExtCfg(n.identifier),f=_u(t.setTimeoutOverride,t.clearTimeoutOverride),I=!t.disableOptimizeObj&&!!fr("chrome"),function(n){var e=n.getWParam;n.getWParam=function(){var n=0;return t.ignoreMc1Ms0CookieProcessing&&(n|=2),n|e()}}(d),t.eventsLimitInMem>0&&(m=t.eventsLimitInMem),t.immediateEventLimit>0&&(g=t.immediateEventLimit),t.autoFlushEventsLimit>0&&(a=t.autoFlushEventsLimit),Te(t[wu])&&(k=t[wu]),Te(t[Eu])&&(D=t[Eu]),rn(),t.httpXHROverride&&t.httpXHROverride.sendPOST&&(i=t.httpXHROverride),la(u.anonCookieName)&&o.addQueryStringParameter("anoncknm",u.anonCookieName),o.sendHook=t.payloadPreprocessor,o.sendListener=t.payloadListener;var h=t.overrideEndpointUrl?t.overrideEndpointUrl:u.endpointUrl;n._notificationManager=c.getNotifyMgr(),o.initialize(h,n.core,n,i,t);var p=u.disablePageUnloadEvents||[];ro(r,p,s),io(r,p,s),oo(O,u.disablePageShowEvents,s)}catch(y){throw n.setInitialized(!1),y}}),(function(){return{coreConfig:u,core:c,extensions:l}}))},n.processTelemetry=function(e,r){Sa(e,n.identifier);var i=(r=n._getTelCtx(r)).getExtCfg(n.identifier),o=!!t.disableTelemetry;i&&(o=o||!!i.disableTelemetry);var a=e;o||l||(t[Cu]&&(a.iKey=t[Cu]),i&&i[Cu]&&(a.iKey=i[Cu]),M(a,!0),x?K(2,2):A()),n.processNext(a,r)},n._doTeardown=function(n,e){K(2,2),l=!0,o.teardown(),to([Fi,Ri,Ai],null,s),function(n,e){var t=$i(Ki,e);to([Ai],n,t),to([Ui],null,t)}(null,s),function(n,e){var t=$i(Bi,e);to([Li],n,t),to([Ui],null,t)}(null,s),L()},n.setEventQueueLimits=function(n,e){m=n>0?n:1e4,a=e>0?e:0,rn();var t=y>n;if(!t&&u>0)for(var r=1;!t&&r<=3;r++){var i=E[r];i&&i.batches&&Pe(i.batches,(function(n){n&&n.count()>=u&&(t=!0)}))}H(!0,t)},n.pause=function(){F(),h=!0,o.pause()},n.resume=function(){h=!1,o.resume(),A()},n.addResponseHandler=function(n){o._responseHandlers.push(n)},n._loadTransmitProfiles=function(n){F(),X(),S=Ea,A(),pe(n,(function(n,e){var t=e.length;if(t>=2){var r=t>2?e[2]:0;if(e.splice(0,t-2),e[1]<0&&(e[0]=-1),e[1]>0&&e[0]>0){var i=e[0]/e[1];e[0]=Math.ceil(i)*e[1]}r>=0&&e[1]>=0&&r>e[1]&&(r=e[1]),e.push(r),b[n]=e}}))},n.flush=function(n,e,t){if(void 0===n&&(n=!0),!h)if(t=t||1,n)null==v?(F(),j(1,0,t),v=R((function(){v=null,G(e,t)}),0)):d.push(e);else{var r=F();N(1,1,t),null!==e&&void 0!==e&&e(),r&&A()}},n.setMsaAuthTicket=function(n){o.addHeader(za,n)},n.hasEvents=U,n._setTransmitProfile=function(n){S!==n&&void 0!==b[n]&&(F(),S=n,A())},n._backOffTransmission=function(){C<4&&(C++,F(),A())},n._clearBackOff=function(){C&&(C=0,F(),A())},Me(n,"_setTimeoutOverride",(function(){return f.set}),(function(n){f=_u(n,f.clear)})),Me(n,"_clearTimeoutOverride",(function(){return f.clear}),(function(n){f=_u(f.set,n)}))})),r}return lo(e,n),e.__ieDyn=1,e}(Go),Iu=Pu,xu="HttpManager:_sendBatches",ku="PrivacyGuard:_processTelemetry",Du=function(){function n(n,e,t){this.start=Date.now(),this.name=n,this.isAsync=!0===t,this.payload=e}return n.prototype.isChildEvt=function(){return!1},n.prototype.complete=function(){this.time=Date.now()-this.start,this.exTime=this.time},n}(),Ou=function(){function n(n){this._callbacks=n}return n.prototype.create=function(n,e,t){return n===xu||n===ku?new Du(n,e,t):null},n.prototype.fire=function(n){if(n&&n.complete(),this._callbacks)switch(n.name){case xu:this.handleSendBatches(n);break;case ku:this.handlePrivacyGuardNotification(n)}},n.prototype.setCtx=function(n,e){},n.prototype.getCtx=function(n){},n.prototype.handleSendBatches=function(n){if(this._callbacks.requestProcessingStats){var e=0;if(n.payload){var t=n.payload();if(t.batches)for(var r in t.batches)e+=t.batches[r].evts.length}this._callbacks.requestProcessingStats(n.time||0,e)}},n.prototype.handlePrivacyGuardNotification=function(n){this._callbacks.privacyGuardStats&&n.time&&n.time>0&&this._callbacks.privacyGuardStats(n.time)},n}();var Mu=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,o.__extends)(e,n),e.prototype.initialize=function(e,t){this._postChannel=new Iu;var r=null!==t&&void 0!==t?t:[];e.channels=[[this._postChannel]],e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this._postChannel.identifier]=(0,o.__assign)((0,o.__assign)({},e.channelConfiguration),e.extensionConfig[this._postChannel.identifier]);try{n.prototype.initialize.call(this,e,r)}catch(i){this.logger.warnToConsole("Failed to initialize SDK."+i)}},e.prototype.setUploadFrequency=function(n){if(this._postChannel&&n){var e=n/1e3,t=e/2,r={};r.OTelCustomTransmissionProfile=[e,t],this._postChannel._loadTransmitProfiles(r),this._postChannel._setTransmitProfile("OTelCustomTransmissionProfile")}},e.prototype.flush=function(n){this._postChannel&&this._postChannel.flush(n)},e.prototype.shutdown=function(){this._postChannel&&this._postChannel.teardown()},e}(Ca),Nu=function(n){function e(e,t){var r,i=n.call(this,e,t)||this;i.sendTelemetryEvent=function(n){return function(n,e){try{return n()}catch(t){return(0,a.H)(1,"1DS Sink",t),e}}((function(){var e=i.getOneDSTelemetryEvent(n);e&&r&&r.track(e)}),undefined)},i.sendCustomerContent=function(n){},i.sendNonStandardEvent=function(n,e){var t=!1;s.forEach((function(r){r.canHandle(e)&&(r.processEvent(n),t=!0)})),t||(0,a.uf)(0,1,(function(){return"Missing Handler for "+e+"to process"+n.eventName}))},i.flush=function(n){null===r||void 0===r||r.flush(n),s.forEach((function(e){e.flush(n)}))},i.shutdown=function(){try{null===r||void 0===r||r.shutdown(),s.forEach((function(n){n.shutdown()}))}catch(n){(0,a.uf)(0,2,(function(){return"An error occurred on shutdown"}))}};var u,c,s=t.nonStandardEventHandlers||[];if(r=function(n,e){var t=n.httpXHROverride,r={instrumentationKey:e,endpointUrl:n.endpointUrl,channelConfiguration:{eventsLimitInMem:n.eventsLimitInMem,httpXHROverride:t,setTimeoutOverride:n.setTimeoutOverride,clearTimeoutOverride:n.clearTimeoutOverride,ignoreMc1Ms0CookieProcessing:!0,disableOptimizeObj:!0},enableWParam:!t,disableCookiesUsage:!0,extensionConfig:(0,o.__assign)({},n.extensionConfig)};n.stats&&n.stats.networkStats&&r.channelConfiguration&&(r.channelConfiguration.payloadListener=function(e,t){var r,i=t||e;i.data&&(null===(r=n.stats)||void 0===r||r.networkStats(i.data.length))});var i=new Mu;return i.initialize(r,n.plugins),i.setUploadFrequency(n.uploadFrequency),n.notificationListener&&i.addNotificationListener(n.notificationListener),n.stats&&i.setPerfMgr(new Ou(n.stats)),i}(t,nt),s.forEach((function(n){n.initialize(i,t)})),!t.endpointUrl)throw new Error("Missing Endpoint Url");return t.disableStatsTracking||(u=i,(c=r)&&c.addNotificationListener({eventsSent:function(n){(0,a.uf)(2,2,(function(){return"Successfully sent ".concat(n.length," event(s)")})),(0,a.uf)(3,2,(function(){return"Sent event(s) details : ".concat(JSON.stringify(n,null,2))})),u.eventsSent+=n.length},eventsDiscarded:function(n,e){(0,a.uf)(0,2,(function(){return"Discarded ".concat(n.length," event(s) because ").concat(e)})),(0,a.uf)(3,2,(function(){return"Discarded event(s) details : ".concat(JSON.stringify(n,null,2))})),u.eventsDiscarded+=n.length}})),i}return(0,o.__extends)(e,n),e}(so),Uu=t(96914),Au="Office.Telemetry.OTelJS.EventThrottled";function Lu(n){return"number"===typeof n}var Ru,Fu=function(){function n(n,e){this._sinkName=n,this._telemetrySink=e,this.name="EventThrottler",this._totalEventsInLastInterval=0,this._singleEventInLastInterval={},this._eventThrottleReported={},this._lastIntervalStart=Date.now(),this._maxNamedEventsPerSecond={}}return n.prototype.setSingleEventThrottle=function(n){this._maxSingleEventPerSecond=n},n.prototype.setTotalEventThrottle=function(n){this._maxTotalEventsPerSecond=n},n.prototype.setNamedEventThrottle=function(n,e){this._maxNamedEventsPerSecond[n]=e},n.prototype.processEvent=function(n){var e=n.eventName;if(e===Au)return!0;var t=!0;return Date.now()-this._lastIntervalStart>1e3&&(this._lastIntervalStart=Date.now(),this._totalEventsInLastInterval=0,this._singleEventInLastInterval={}),this._singleEventInLastInterval[e]=this._singleEventInLastInterval[e]+1||1,e in this._maxNamedEventsPerSecond?t=this.applyThrottle(this._singleEventInLastInterval[e],this._maxNamedEventsPerSecond[e],"MaxNamedEventsPerSecond",e):Lu(this._maxSingleEventPerSecond)&&(t=this.applyThrottle(this._singleEventInLastInterval[e],this._maxSingleEventPerSecond,"MaxSingleEventsPerSecond",e)),Lu(this._maxTotalEventsPerSecond)&&(this._totalEventsInLastInterval++,t&&(t=this.applyThrottle(this._totalEventsInLastInterval,this._maxTotalEventsPerSecond,"MaxTotalEventsPerSecond",e))),t},n.prototype.applyThrottle=function(n,e,t,r){return!(n>e)||(n===e+1&&this._telemetrySink&&!this._eventThrottleReported[r]&&(this._eventThrottleReported[r]=!0,this._telemetrySink.sendTelemetryEvent({eventName:Au,telemetryProperties:{ariaTenantToken:nt,nexusTenantToken:1723},eventFlags:{diagnosticLevel:110},dataFields:[(0,Uu.dt)("SinkName",this._sinkName||""),(0,Uu.dt)("ThrottledEvent.Name",r),(0,Uu.Kq)(t,e)]})),(0,a.uf)(2,1,(function(){return"1DS Sink Event Throttle: Exceeded ".concat(e," ").concat(t,": ").concat(r)})),!1)},n}();!function(n){n.USGOV_DOD="https://pf.events.data.microsoft.com/OneCollector/1.0/",n.USGOV_DOJ="https://tb.events.data.microsoft.com/OneCollector/1.0/",n.PUBLIC="https://browser.events.data.microsoft.com/OneCollector/1.0/",n.CUSTOMER_CONTENT="",n.EUDB="https://eu-office.events.data.microsoft.com/OneCollector/1.0/"}(Ru||(Ru={}));var Ku,Bu=t(66051),Hu="9188040d-6c67-4c5b-b112-36a304b66dad",qu=function(){function n(e){var t=this;(0,r.Z)(this,n),this.context=e,this.createOneDsSink=function(){if(!Ku){(Ku=new Nu([],{endpointUrl:t.getOneDsEndpointUrl()})).setFullEventsEnabled(!0);var n=new Fu("_",Ku);n.setSingleEventThrottle(100),n.setTotalEventThrottle(1e3),Ku.addPreprocessor(n),t.setPartADataFields(t.context)}return Ku},this.shutdown=function(){Ku.shutdown()},this.setPartADataFields=function(n){var e=t.extractPartADataFields(n);Ku.addPersistentDataFields(e)},this.getOneDsEndpointUrl=function(){switch(t.audience){case"Automation":case"SyntheticTraffic":case"Local":case"Development":case"Staging":case"Dogfood":case"Preview":case"Microsoft":case"Production":case"GCC":return Ru.PUBLIC;case"GCC-High":return Ru.USGOV_DOJ;case"DoD":return Ru.USGOV_DOD;default:throw new Error("Unexpected audience value provided")}},this.audience=e.audience}return(0,i.Z)(n,[{key:"getReleaseAudienceGroup",value:function(n){if(n)switch(n){case"Automation":case"SyntheticTraffic":case"Local":case"Development":case"Staging":case"Dogfood":case"Preview":case"Microsoft":case"Production":return n;case"GCC":case"GCC-High":case"DoD":case"USNat":case"USSec":return"Production";default:return}}},{key:"isGuid",value:function(n){return n&&!!n.match(/(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}/g)}},{key:"isOrgIdPuid",value:function(n){return null===n||void 0===n?void 0:n.match(/[1-2]{1}[0-9a-fA-F]{15}/g)}},{key:"determineIdentitySpace",value:function(n,e){return e||(this.isGuid(n)?"UserObjectId":this.isOrgIdPuid(n)?"OrgIdPuid":void 0)}},{key:"determineTenantGroupType",value:function(n){return n===Hu?"Consumer":"Commercial"}},{key:"addDataFieldIfNeeded",value:function(n,e,t){var r=(0,Bu.r)(t,e);r&&n.push(r)}},{key:"extractPartADataFields",value:function(n){var e,t,r,i,o,a,u=[];this.addDataFieldIfNeeded(u,"App.Platform",n.appPlatform||"Web"),this.addDataFieldIfNeeded(u,"App.Name",n.appName||"Fluid"),this.addDataFieldIfNeeded(u,"App.Version",n.appVersion),this.addDataFieldIfNeeded(u,"Release.AudienceGroup",this.getReleaseAudienceGroup(n.audience)),this.addDataFieldIfNeeded(u,"Session.Id",n.sessionId),this.addDataFieldIfNeeded(u,"Culture.UiLanguage",n.uiLanguage);var c=null!==(e=n.userDetails)&&void 0!==e?e:n.user,s=null!==(t=null!==(r=null===(i=n.userDetails)||void 0===i?void 0:i.id)&&void 0!==r?r:null===(o=n.user)||void 0===o?void 0:o.id)&&void 0!==t?t:null===(a=n.user)||void 0===a?void 0:a.oid;return this.addDataFieldIfNeeded(u,"User.IsAnonymous",!c),this.addDataFieldIfNeeded(u,"User.TenantId",null===c||void 0===c?void 0:c.tenantId),this.addDataFieldIfNeeded(u,"User.TenantGroup",c&&this.determineTenantGroupType(c.tenantId)),this.addDataFieldIfNeeded(u,"User.PrimaryIdentityHash",s),this.addDataFieldIfNeeded(u,"User.PrimaryIdentitySpace",c&&this.determineIdentitySpace(s,c.userIdSpace)),u}}]),n}()}}]);
//# sourceMappingURL=officeFluidOneDsSink.9e93fc96.chunk.js.map